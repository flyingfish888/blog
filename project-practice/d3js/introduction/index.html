<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>D3js入门 | 会飞的鱼🐟</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="学习笔记">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.5fc96bdf.js" as="script"><link rel="preload" href="/assets/js/2.56cd01f5.js" as="script"><link rel="preload" href="/assets/js/8.eef37b1f.js" as="script"><link rel="prefetch" href="/assets/js/10.3ea21215.js"><link rel="prefetch" href="/assets/js/11.f2af6ae8.js"><link rel="prefetch" href="/assets/js/12.644b56f9.js"><link rel="prefetch" href="/assets/js/13.321b16b6.js"><link rel="prefetch" href="/assets/js/14.c75e2d6b.js"><link rel="prefetch" href="/assets/js/15.5b62c749.js"><link rel="prefetch" href="/assets/js/16.1365c67d.js"><link rel="prefetch" href="/assets/js/17.b89f8d5a.js"><link rel="prefetch" href="/assets/js/18.c2b2881c.js"><link rel="prefetch" href="/assets/js/19.793ae888.js"><link rel="prefetch" href="/assets/js/20.ceb40dc7.js"><link rel="prefetch" href="/assets/js/21.3872ab50.js"><link rel="prefetch" href="/assets/js/22.cdd80890.js"><link rel="prefetch" href="/assets/js/23.b89f5df5.js"><link rel="prefetch" href="/assets/js/24.00cc879e.js"><link rel="prefetch" href="/assets/js/25.e7d9e711.js"><link rel="prefetch" href="/assets/js/26.38dfa295.js"><link rel="prefetch" href="/assets/js/27.42e5a51b.js"><link rel="prefetch" href="/assets/js/28.f29c5a5a.js"><link rel="prefetch" href="/assets/js/29.9c1152d0.js"><link rel="prefetch" href="/assets/js/3.5ad5b76e.js"><link rel="prefetch" href="/assets/js/30.fb98a7fd.js"><link rel="prefetch" href="/assets/js/31.587a4c4e.js"><link rel="prefetch" href="/assets/js/32.07d3f2a3.js"><link rel="prefetch" href="/assets/js/33.330ca2ab.js"><link rel="prefetch" href="/assets/js/34.644b8fec.js"><link rel="prefetch" href="/assets/js/35.2a59dd03.js"><link rel="prefetch" href="/assets/js/36.f24a64fb.js"><link rel="prefetch" href="/assets/js/37.4c48b883.js"><link rel="prefetch" href="/assets/js/38.e2ef6b4b.js"><link rel="prefetch" href="/assets/js/39.560ec89f.js"><link rel="prefetch" href="/assets/js/4.a64d0739.js"><link rel="prefetch" href="/assets/js/40.e9e6f1a1.js"><link rel="prefetch" href="/assets/js/41.c2b76d48.js"><link rel="prefetch" href="/assets/js/42.a837ca06.js"><link rel="prefetch" href="/assets/js/43.e6231a11.js"><link rel="prefetch" href="/assets/js/44.a06340cd.js"><link rel="prefetch" href="/assets/js/45.2e753f17.js"><link rel="prefetch" href="/assets/js/46.67d5bfd7.js"><link rel="prefetch" href="/assets/js/47.79d98f76.js"><link rel="prefetch" href="/assets/js/48.a27665a5.js"><link rel="prefetch" href="/assets/js/49.61035e35.js"><link rel="prefetch" href="/assets/js/5.05ac1e95.js"><link rel="prefetch" href="/assets/js/50.23d10ba5.js"><link rel="prefetch" href="/assets/js/51.ffd94a50.js"><link rel="prefetch" href="/assets/js/52.72645a49.js"><link rel="prefetch" href="/assets/js/53.fddcc9c3.js"><link rel="prefetch" href="/assets/js/54.29a19228.js"><link rel="prefetch" href="/assets/js/55.9dd56225.js"><link rel="prefetch" href="/assets/js/56.97ccbdc2.js"><link rel="prefetch" href="/assets/js/57.b5653684.js"><link rel="prefetch" href="/assets/js/58.5022402f.js"><link rel="prefetch" href="/assets/js/59.2788a4dc.js"><link rel="prefetch" href="/assets/js/6.2caff082.js"><link rel="prefetch" href="/assets/js/60.3a36e8b6.js"><link rel="prefetch" href="/assets/js/61.a58c0429.js"><link rel="prefetch" href="/assets/js/62.22142950.js"><link rel="prefetch" href="/assets/js/63.eb63df3a.js"><link rel="prefetch" href="/assets/js/64.5410a8b2.js"><link rel="prefetch" href="/assets/js/65.05534a28.js"><link rel="prefetch" href="/assets/js/66.345d568d.js"><link rel="prefetch" href="/assets/js/67.6d6c908d.js"><link rel="prefetch" href="/assets/js/68.48f8f647.js"><link rel="prefetch" href="/assets/js/69.0880f127.js"><link rel="prefetch" href="/assets/js/7.92af244d.js"><link rel="prefetch" href="/assets/js/70.6190682a.js"><link rel="prefetch" href="/assets/js/71.aef1621f.js"><link rel="prefetch" href="/assets/js/72.701beefb.js"><link rel="prefetch" href="/assets/js/73.5049b0f0.js"><link rel="prefetch" href="/assets/js/74.951b2541.js"><link rel="prefetch" href="/assets/js/75.a448589d.js"><link rel="prefetch" href="/assets/js/76.5245fdac.js"><link rel="prefetch" href="/assets/js/77.f76382e3.js"><link rel="prefetch" href="/assets/js/78.df1f1d7c.js"><link rel="prefetch" href="/assets/js/9.e99284fe.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">会飞的鱼🐟</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basics/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/basics/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/basics/html/" class="nav-link">
  HTML
</a></li></ul></div></div><div class="nav-item"><a href="/frame/" class="nav-link">
  前端框架
</a></div><div class="nav-item"><a href="/engineering/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="/project-practice/" class="nav-link router-link-active">
  项目实践
</a></div><div class="nav-item"><a href="/browser/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><a href="/computer/" class="nav-link">
  计算机基础
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basics/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/basics/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/basics/html/" class="nav-link">
  HTML
</a></li></ul></div></div><div class="nav-item"><a href="/frame/" class="nav-link">
  前端框架
</a></div><div class="nav-item"><a href="/engineering/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="/project-practice/" class="nav-link router-link-active">
  项目实践
</a></div><div class="nav-item"><a href="/browser/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><a href="/computer/" class="nav-link">
  计算机基础
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/project-practice/h5-static/" class="sidebar-heading clickable"><span>H5静态化</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/project-practice/h5-static/programme/" class="sidebar-link">静态化方案</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/project-practice/d3js/" class="sidebar-heading clickable router-link-active open"><span>D3js</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/project-practice/d3js/introduction/" aria-current="page" class="active sidebar-link">D3js入门</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/project-practice/d3js/introduction/#什么是d3js" class="sidebar-link">什么是D3js</a></li><li class="sidebar-sub-header"><a href="/project-practice/d3js/introduction/#选择集" class="sidebar-link">选择集</a></li><li class="sidebar-sub-header"><a href="/project-practice/d3js/introduction/#核心操作" class="sidebar-link">核心操作</a></li><li class="sidebar-sub-header"><a href="/project-practice/d3js/introduction/#绘制简单图表" class="sidebar-link">绘制简单图表</a></li><li class="sidebar-sub-header"><a href="/project-practice/d3js/introduction/#绘制坐标轴" class="sidebar-link">绘制坐标轴</a></li><li class="sidebar-sub-header"><a href="/project-practice/d3js/introduction/#绘制直方图" class="sidebar-link">绘制直方图</a></li><li class="sidebar-sub-header"><a href="/project-practice/d3js/introduction/#绘制饼图" class="sidebar-link">绘制饼图</a></li><li class="sidebar-sub-header"><a href="/project-practice/d3js/introduction/#与echarts对比" class="sidebar-link">与echarts对比</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/project-practice/micro-frontends/" class="sidebar-heading clickable"><span>微前端</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/project-practice/micro-frontends/knowledge/" class="sidebar-link">基础知识</a></li><li><a href="/project-practice/micro-frontends/qiankun/" class="sidebar-link">乾坤框架</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="d3js入门"><a href="#d3js入门" class="header-anchor">#</a> D3js入门</h1> <h2 id="什么是d3js"><a href="#什么是d3js" class="header-anchor">#</a> 什么是D3js</h2> <ul><li><p>D3js (Data-Driven Documents) 是一个可以基于<strong>数据来操作文档</strong>的 JavaScript 库。</p></li> <li><p>不引入新的视觉表示方法，而是借助于现有的 Web 元素: HTML, CSS, SVG 等</p></li> <li><p>D3 遵循现有的 Web 标准，可以不需要其他任何框架独立运行在现代浏览器中，它结合强大的可视化组件来驱动 DOM 操作。</p></li> <li><p>D3 可以将数据绑定到 DOM 上，然后根据数据来计算对应 DOM 的属性值。</p></li></ul> <h2 id="选择集"><a href="#选择集" class="header-anchor">#</a> 选择集</h2> <p>D3的选择集合类似JQuery，通过D3封装的方法来访问各个元素，以及设置样式属性。</p> <p>另外D3有个强大的功能，它可以支持动态设置属性、样式等值。</p> <p><strong>示例，动态设置多个p标签的背景色</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://d3js.org/d3.v5.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">'background-color'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hsl(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">360</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, 100%, 50%)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>结果</strong></p> <p><img src="data:image/png;base64,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" alt="d3-p-color"></p> <h2 id="核心操作"><a href="#核心操作" class="header-anchor">#</a> 核心操作</h2> <ul><li>enter和exit</li></ul> <p>前面有说先将数据绑定到DOM上，然后再根据数据来计算对应的DOM需要进行什么操作。</p> <p>数据绑定的时候可能出现DOM元素与数据元素个数不匹配的问题。</p> <p><code>enter</code>用来操作添加新的DOM元素，<code>exit</code>操作用来移除多余的DOM元素。即如果元素多于DOM个数时用<code>enter</code>，如果数据元素少于DOM元素，则用<code>exit</code>。</p> <p><strong>情形一：数据元素个数多于DOM元素个数</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://d3js.org/d3.v5.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">const</span> dataset <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'.wrapper'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'.wrapper'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">I am P </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>d<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>结果</strong></p> <p><img src="/assets/img/enter.b62a2c21.png" alt="enter"></p> <p><strong>情形二：数据元素与DOM元素个数一样</strong></p> <p>不需要添加也不需要删除，直接绑定数据操作即可</p> <p><strong>情形三：数据元素个数少于DOM元素个数</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://d3js.org/d3.v5.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">const</span> dataset <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> p <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'.wrapper'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">I am P </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>d<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>结果：</strong></p> <p><img src="/assets/img/exit.c80211f9.png" alt="exit"></p> <p><strong>实际应用中可能无法统计或者不想统计谁多谁少，便可以三种一起使用：</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> p <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'.wrapper'</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">I am P </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>d<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">I am P </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>d<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="绘制简单图表"><a href="#绘制简单图表" class="header-anchor">#</a> 绘制简单图表</h2> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>需要有基本的svg知识，<a href="https://d3js.org.cn/svg/" target="_blank" rel="noopener noreferrer">参考文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <p><strong>要实现的效果图：</strong></p> <p><img src="data:image/png;base64,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" alt="rect"></p> <p><strong>实现代码：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">const</span> svgW <span class="token operator">=</span> <span class="token number">600</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> svgH <span class="token operator">=</span> <span class="token number">600</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'svg'</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> svgW<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> svgH<span class="token punctuation">)</span><span class="token punctuation">;</span>


  <span class="token keyword">const</span> margin <span class="token operator">=</span> <span class="token number">10</span> <span class="token comment">// 设置边距</span>
  <span class="token keyword">const</span> dataset <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">250</span> <span class="token punctuation">,</span> <span class="token number">210</span> <span class="token punctuation">,</span> <span class="token number">170</span> <span class="token punctuation">,</span> <span class="token number">130</span> <span class="token punctuation">,</span> <span class="token number">90</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// 数据（表示矩形的宽度）</span>

  <span class="token keyword">const</span> g <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'transform'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>margin<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>margin<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> rectHeight <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span> <span class="token comment">// 矩形的高度</span>

  g<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'rect'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'rect'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> i <span class="token operator">*</span> rectHeight<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> rectHeight <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'fill'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="绘制坐标轴"><a href="#绘制坐标轴" class="header-anchor">#</a> 绘制坐标轴</h2> <p><strong>期望效果：</strong></p> <p><img src="data:image/png;base64,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CxBQ/BYQkiUSIECAAAECBOYQUPzmUHQNAgQIECBAgMACBBS/BYRkiQQIECBAgACBOQRW681rjgu5BgECBAgQIECAQNkC3vErOx+rI0CAAAECBAjMJqD4zUbpQgQIECBAgACBsgUUv7LzsToCBAgQIECAwGwCit9slC5EgAABAgQIEChbYKfs5d386lar1c3/Yr+SAAECBAgQKFbA3ztNF001xa8ncqOku1H+7JX7Ii6PP6uW7tfLI53tYa4sj8OopfsaeaSzPcyV+zy80gn4o950tq5MgAABAgQIEChKQPErKg6LIUCAAAECBAikE1D80tm6MgECBAgQIECgKAHFr6g4LIYAAQIECBAgkE7A/7Itna0rEyBAgAABAgSKEvCOX1FxWAwBAgQIECBAIJ1AFcWv/8+GXL16NZ2SK/+hQJ/B8MfeF8hmTyLPxyn/qfN5VtnO1OEz0h/vveSxJ5H2448//jgaMGU/dX50AScOLTCVR2+/92Pv4vLYkzj6x8UXv2+//bY7ffp098wzf+vuv//+rv/cK1bgxRdf7O65555tDn0WZ8+e3S5ANrE5XLlypXv44Ye78+fP/19/ucTkcmMenpMY94OmfPPNN92TTz7ZPfroo90DDzzQffrpp56Rg6CCzk3l4RkJCmDTohf9ev7559fvvffedg/9x/5zr1iBM2fOrD///PPRUNmMSJKd+O6779b33nvvevMPt/Urr7yynTPlP3U+2eIavPBBeXhO8t0I586dW7/xxhvbBXz88T/XTz311PZ46lmYOp9vB3VNnsrDMxKT8+Lf8fvss8+6Z589s63Jzz33XHfp0qWgymzMnsD333/f/fzzz92FCxe6L7/8cu90J5t9iuQHt99+e3f58r+6J554Yn/WlP/U+f0vdHBkgYPy8JwcmfXQF/j111/3/yTitttOdD/88O/ttaaehanzh16AL7xOYCoPz8h1TMk+WXTx+/333zcP8A/dHXf8dQvU/2a7+Tftrj/vFSfQm1+8eLG76667utdff7176aWXthnIJi6D3d3d7sSJv+wPnHo2fvvtN8/MvlK6gxvz6Cd5TtJ5/9GV+38pPXXq1PZbgV544YXu5Zf/Pvl7lGfkjzSP/vMH5dFf1TNydNubucKi/1+9x48f3/zD7kTXP6i33nrr9uPJkye7/rxXnMDly5e7W265ZTuw/z6a/nst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" alt="axis"></p> <p><strong>实现代码：</strong></p> <p>定义一个比例尺</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// 定义一个线性比例尺</span>
  <span class="token keyword">const</span> xScale <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                  <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span>d3<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                  <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'xScale(0)::'</span><span class="token punctuation">,</span> <span class="token function">xScale</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// xScale(0):: 0</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'xScale(100)::'</span><span class="token punctuation">,</span> <span class="token function">xScale</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// xScale(100):: 200</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'xScale(250)::'</span><span class="token punctuation">,</span> <span class="token function">xScale</span><span class="token punctuation">(</span><span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// xScale(250):: 500</span>
</code></pre></div><p>绘制坐标轴</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">//绘制坐标轴</span>
  <span class="token keyword">const</span> xAxis <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">axisBottom</span><span class="token punctuation">(</span>xScale<span class="token punctuation">)</span> <span class="token comment">// 定义一个axis，由bottom可知，是朝下的</span>
                <span class="token punctuation">.</span><span class="token function">ticks</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置刻度数目</span>

  <span class="token keyword">const</span> temp <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'transform'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(20, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dataset<span class="token punctuation">.</span>length <span class="token operator">*</span> rectHeight<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>xAxis<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// xAxis(temp);</span>
</code></pre></div><h2 id="绘制直方图"><a href="#绘制直方图" class="header-anchor">#</a> 绘制直方图</h2> <p><strong>预期效果：</strong></p> <p><img src="/assets/img/histogram.a46705b1.png" alt="histogram"></p> <p><strong>实现代码</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">const</span> svgH <span class="token operator">=</span> <span class="token number">600</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> svgW <span class="token operator">=</span> <span class="token number">600</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> margin <span class="token operator">=</span> <span class="token number">60</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'svg'</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> svgW<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> svgH<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> g <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'transform'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>margin<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>margin<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 数据</span>
  <span class="token keyword">const</span> dataset <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// x坐标轴</span>
  <span class="token keyword">const</span> xScale <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleBand</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span>dataset<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">rangeRound</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> svgW <span class="token operator">-</span> <span class="token punctuation">(</span>margin <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> xAxis <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">axisBottom</span><span class="token punctuation">(</span>xScale<span class="token punctuation">)</span><span class="token punctuation">;</span>
  g<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'transform'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(0, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>svgH <span class="token operator">-</span> <span class="token punctuation">(</span>margin <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>xAxis<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// y坐标轴</span>
  <span class="token keyword">const</span> yScale <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> d3<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span>svgH <span class="token operator">-</span> <span class="token punctuation">(</span>margin <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> yAxis <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">axisLeft</span><span class="token punctuation">(</span>yScale<span class="token punctuation">)</span><span class="token punctuation">;</span>
  g<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>yAxis<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 数据分组</span>
  <span class="token keyword">const</span> dgs <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'.rect'</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'rect'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> rectPadding <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// 矩形之间的间隔</span>

  <span class="token comment">// 画柱子</span>
  dgs<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'rect'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">xScale</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">+</span> rectPadding<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> xScale<span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> rectPadding<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> min <span class="token operator">=</span> yScale<span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">yScale</span><span class="token punctuation">(</span>min<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mouseover'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
          <span class="token comment">// .transition()</span>
          <span class="token comment">// .duration(1500)</span>
          <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'fill'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mouseout'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
          <span class="token comment">// .transition()</span>
          <span class="token comment">// .duration(1500)</span>
          <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'fill'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> i<span class="token operator">*</span><span class="token number">200</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">yScale</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> svgH <span class="token operator">-</span> <span class="token punctuation">(</span>margin <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">yScale</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'fill'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//  transition后面写on存在一个bug：https://www.coder.work/article/1191655</span>
  <span class="token comment">// 绘制文字</span>
  dgs<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'text'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">xScale</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">+</span> rectPadding<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> min <span class="token operator">=</span> yScale<span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">yScale</span><span class="token punctuation">(</span>min<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'dx'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'dy'</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> i<span class="token operator">*</span><span class="token number">200</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token function">yScale</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="绘制饼图"><a href="#绘制饼图" class="header-anchor">#</a> 绘制饼图</h2> <p><strong>预期效果</strong></p> <p><img src="/assets/img/pie.51de0f39.png" alt="pie"></p> <p><strong>实现代码</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">const</span> svgH <span class="token operator">=</span> <span class="token number">600</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> svgW <span class="token operator">=</span> <span class="token number">600</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> margin <span class="token operator">=</span> <span class="token number">60</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'svg'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> svgW<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> svgH<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> g <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'transform'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>svgW<span class="token operator">/</span><span class="token number">2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>svgH<span class="token operator">/</span><span class="token number">2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> dataset <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 需要将这些数据变成饼状图的数据</span>

  <span class="token comment">// 颜色比例尺</span>
  <span class="token keyword">const</span> colorScale <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleOrdinal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span>dataset<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span>schemeCategory10<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> pie <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">pie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> innerRadius <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 内半径</span>
  <span class="token keyword">const</span> outerRadius <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token comment">// 外半径</span>
  <span class="token keyword">const</span> arc_generator <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">innerRadius</span><span class="token punctuation">(</span>innerRadius<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">outerRadius</span><span class="token punctuation">(</span>outerRadius<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> pieData <span class="token operator">=</span> <span class="token function">pie</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pieData<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> pgs <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>pieData<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  pgs<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token function">arc_generator</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'fill'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">colorScale</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  pgs<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'text'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'transform'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//位置设在中心处</span>
      <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>arc_generator<span class="token punctuation">.</span><span class="token function">centroid</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'text-anchor'</span><span class="token punctuation">,</span> <span class="token string">'middle'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="与echarts对比"><a href="#与echarts对比" class="header-anchor">#</a> 与echarts对比</h2> <ul><li>体积更小</li> <li>操作更灵活，echarts是通过配置生成，d3js类似赋予了一个绘制的能力</li> <li>上手成本较高，比较echarts只需要了解配置项，而d3js需要熟悉api，并灵活组合api绘制自己想要的效果</li></ul> <blockquote><p>知乎上一篇比较全的入门下面的回复：<a href="https://zhuanlan.zhihu.com/p/38001672" target="_blank" rel="noopener noreferrer">D3.js 学习之路<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <img src="/assets/img/comment.70cd5bbb.png" alt="comment"></p></blockquote> <blockquote><p><a href="http://www.a4z.cn/pui/ant-admin.html#/vertical-bp-chart" target="_blank" rel="noopener noreferrer">优秀作品欣赏<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <blockquote><p>参考文档： <a href="https://d3js.org.cn/" target="_blank" rel="noopener noreferrer">D3js官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://blog.csdn.net/qq_34414916/category_7608878.html" target="_blank" rel="noopener noreferrer">D3.js的v5版本入门教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/project-practice/h5-static/programme/" class="prev">
        静态化方案
      </a></span> <span class="next"><a href="/project-practice/micro-frontends/knowledge/">
        基础知识
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5fc96bdf.js" defer></script><script src="/assets/js/2.56cd01f5.js" defer></script><script src="/assets/js/8.eef37b1f.js" defer></script>
  </body>
</html>
