<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chrome架构 | 会飞的鱼🐟</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="学习笔记">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.5fc96bdf.js" as="script"><link rel="preload" href="/assets/js/2.56cd01f5.js" as="script"><link rel="preload" href="/assets/js/6.2caff082.js" as="script"><link rel="prefetch" href="/assets/js/10.3ea21215.js"><link rel="prefetch" href="/assets/js/11.f2af6ae8.js"><link rel="prefetch" href="/assets/js/12.644b56f9.js"><link rel="prefetch" href="/assets/js/13.321b16b6.js"><link rel="prefetch" href="/assets/js/14.c75e2d6b.js"><link rel="prefetch" href="/assets/js/15.5b62c749.js"><link rel="prefetch" href="/assets/js/16.1365c67d.js"><link rel="prefetch" href="/assets/js/17.b89f8d5a.js"><link rel="prefetch" href="/assets/js/18.c2b2881c.js"><link rel="prefetch" href="/assets/js/19.793ae888.js"><link rel="prefetch" href="/assets/js/20.ceb40dc7.js"><link rel="prefetch" href="/assets/js/21.3872ab50.js"><link rel="prefetch" href="/assets/js/22.cdd80890.js"><link rel="prefetch" href="/assets/js/23.b89f5df5.js"><link rel="prefetch" href="/assets/js/24.00cc879e.js"><link rel="prefetch" href="/assets/js/25.e7d9e711.js"><link rel="prefetch" href="/assets/js/26.38dfa295.js"><link rel="prefetch" href="/assets/js/27.42e5a51b.js"><link rel="prefetch" href="/assets/js/28.f29c5a5a.js"><link rel="prefetch" href="/assets/js/29.9c1152d0.js"><link rel="prefetch" href="/assets/js/3.5ad5b76e.js"><link rel="prefetch" href="/assets/js/30.fb98a7fd.js"><link rel="prefetch" href="/assets/js/31.587a4c4e.js"><link rel="prefetch" href="/assets/js/32.07d3f2a3.js"><link rel="prefetch" href="/assets/js/33.330ca2ab.js"><link rel="prefetch" href="/assets/js/34.644b8fec.js"><link rel="prefetch" href="/assets/js/35.2a59dd03.js"><link rel="prefetch" href="/assets/js/36.f24a64fb.js"><link rel="prefetch" href="/assets/js/37.4c48b883.js"><link rel="prefetch" href="/assets/js/38.e2ef6b4b.js"><link rel="prefetch" href="/assets/js/39.560ec89f.js"><link rel="prefetch" href="/assets/js/4.a64d0739.js"><link rel="prefetch" href="/assets/js/40.e9e6f1a1.js"><link rel="prefetch" href="/assets/js/41.c2b76d48.js"><link rel="prefetch" href="/assets/js/42.a837ca06.js"><link rel="prefetch" href="/assets/js/43.e6231a11.js"><link rel="prefetch" href="/assets/js/44.a06340cd.js"><link rel="prefetch" href="/assets/js/45.2e753f17.js"><link rel="prefetch" href="/assets/js/46.67d5bfd7.js"><link rel="prefetch" href="/assets/js/47.79d98f76.js"><link rel="prefetch" href="/assets/js/48.a27665a5.js"><link rel="prefetch" href="/assets/js/49.61035e35.js"><link rel="prefetch" href="/assets/js/5.05ac1e95.js"><link rel="prefetch" href="/assets/js/50.23d10ba5.js"><link rel="prefetch" href="/assets/js/51.ffd94a50.js"><link rel="prefetch" href="/assets/js/52.72645a49.js"><link rel="prefetch" href="/assets/js/53.fddcc9c3.js"><link rel="prefetch" href="/assets/js/54.29a19228.js"><link rel="prefetch" href="/assets/js/55.9dd56225.js"><link rel="prefetch" href="/assets/js/56.97ccbdc2.js"><link rel="prefetch" href="/assets/js/57.b5653684.js"><link rel="prefetch" href="/assets/js/58.5022402f.js"><link rel="prefetch" href="/assets/js/59.2788a4dc.js"><link rel="prefetch" href="/assets/js/60.3a36e8b6.js"><link rel="prefetch" href="/assets/js/61.a58c0429.js"><link rel="prefetch" href="/assets/js/62.22142950.js"><link rel="prefetch" href="/assets/js/63.eb63df3a.js"><link rel="prefetch" href="/assets/js/64.5410a8b2.js"><link rel="prefetch" href="/assets/js/65.05534a28.js"><link rel="prefetch" href="/assets/js/66.345d568d.js"><link rel="prefetch" href="/assets/js/67.6d6c908d.js"><link rel="prefetch" href="/assets/js/68.48f8f647.js"><link rel="prefetch" href="/assets/js/69.0880f127.js"><link rel="prefetch" href="/assets/js/7.92af244d.js"><link rel="prefetch" href="/assets/js/70.6190682a.js"><link rel="prefetch" href="/assets/js/71.aef1621f.js"><link rel="prefetch" href="/assets/js/72.701beefb.js"><link rel="prefetch" href="/assets/js/73.5049b0f0.js"><link rel="prefetch" href="/assets/js/74.951b2541.js"><link rel="prefetch" href="/assets/js/75.a448589d.js"><link rel="prefetch" href="/assets/js/76.5245fdac.js"><link rel="prefetch" href="/assets/js/77.f76382e3.js"><link rel="prefetch" href="/assets/js/78.df1f1d7c.js"><link rel="prefetch" href="/assets/js/8.eef37b1f.js"><link rel="prefetch" href="/assets/js/9.e99284fe.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">会飞的鱼🐟</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basics/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/basics/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/basics/html/" class="nav-link">
  HTML
</a></li></ul></div></div><div class="nav-item"><a href="/frame/" class="nav-link">
  前端框架
</a></div><div class="nav-item"><a href="/engineering/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="/project-practice/" class="nav-link">
  项目实践
</a></div><div class="nav-item"><a href="/browser/" class="nav-link router-link-active">
  浏览器
</a></div><div class="nav-item"><a href="/computer/" class="nav-link">
  计算机基础
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basics/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/basics/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/basics/html/" class="nav-link">
  HTML
</a></li></ul></div></div><div class="nav-item"><a href="/frame/" class="nav-link">
  前端框架
</a></div><div class="nav-item"><a href="/engineering/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="/project-practice/" class="nav-link">
  项目实践
</a></div><div class="nav-item"><a href="/browser/" class="nav-link router-link-active">
  浏览器
</a></div><div class="nav-item"><a href="/computer/" class="nav-link">
  计算机基础
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>浏览器基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/browser/basics/url/" class="sidebar-link">从输入URL到页面呈现发生了什么</a></li><li><a href="/browser/basics/repaint/" class="sidebar-link">重绘和回流</a></li><li><a href="/browser/basics/safe/" class="sidebar-link">安全策略</a></li><li><a href="/browser/basics/cache/" class="sidebar-link">缓存策略</a></li><li><a href="/browser/basics/local-store/" class="sidebar-link">本地存储</a></li><li><a href="/browser/basics/homology/" class="sidebar-link">同源策略</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>谷歌浏览器</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/browser/chrome/framework/" aria-current="page" class="active sidebar-link">Chrome架构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/browser/chrome/framework/#_1、cpu-中央处理器" class="sidebar-link">1、CPU（中央处理器）</a></li><li class="sidebar-sub-header"><a href="/browser/chrome/framework/#_2、gpu-图形处理单元" class="sidebar-link">2、GPU（图形处理单元）</a></li><li class="sidebar-sub-header"><a href="/browser/chrome/framework/#_3、process-进程-和thread-线程" class="sidebar-link">3、Process(进程)和Thread(线程)</a></li><li class="sidebar-sub-header"><a href="/browser/chrome/framework/#_4、-浏览器架构" class="sidebar-link">4、 浏览器架构</a></li></ul></li><li><a href="/browser/chrome/performance/" class="sidebar-link">Performance</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="chrome架构"><a href="#chrome架构" class="header-anchor">#</a> Chrome架构</h1> <h2 id="_1、cpu-中央处理器"><a href="#_1、cpu-中央处理器" class="header-anchor">#</a> 1、CPU（中央处理器）</h2> <p><img src="/assets/img/cpu.e2a3813c.png" alt="CPU"></p> <p>CPU(Central Procession Unit)可以被认为是计算机的大脑。CPU核心，就像办公室工作人员，可以逐个处理交代给他们许多不同的任务。曾经大多数CPU都是单核的，但在现代硬件中，通常都是多核CPU了，多核CPU为手机和计算机提供更强的计算能力。</p> <p>CPU主要由<strong>运算器</strong>和<strong>控制器</strong>两大部分组成</p> <p><img src="/assets/img/cpu2.ca19a23d.jpg" alt="CPU2"></p> <ul><li><p>控制器的组成和功能：控制器由程序计数器、指令寄存器、指令译码器、时序产生器和操作控制器组成。它是计算机指挥系统，完成计算机的指挥工作。</p></li> <li><p>运算器的组成和功能：运算器由算数逻辑单元(ALU)、累加寄存器、数据缓冲寄存器和状态条件寄存器组成，它是数据加工处理部件，完成计算机的各种算数和逻辑运算。相对控制器而言，运算器接受控制器的命令而进行动作，即运算器所进行的全部操作由控制器发出的控制信号来指挥的，所以它是执行部件。</p></li></ul> <p>CPU的基本工作原理是执行存储的指令顺序，即程序。程序的执行过程实际上是不断地取出指令、分析指令、执行指令的过程。几乎所有冯·诺依曼型计算机的CPU，其工作都可以分为5个阶段：取指令、指令译码、执行指令、访存数据和结果写回。</p> <h2 id="_2、gpu-图形处理单元"><a href="#_2、gpu-图形处理单元" class="header-anchor">#</a> 2、GPU（图形处理单元）</h2> <p>GPU(Graphics Processing Unit)是计算机的另一部分。与CPU不同，GPU更擅长处理简单任务，同时可以跨多个核心。</p> <p><img src="/assets/img/GPU.a88f3d5c.jpeg" alt="GPU"></p> <p>GPU在最初是用在个人电脑、工作站、游戏机和一些移动设备上运行绘图运算工作的微处理器。因为对于处理器图像数据来说，图像上的每一个像素点都有被处理的需要，这是一个相当大的数据，所以对于运算加速的需求图像处理领域最为强烈，GPU也就应运而生了。</p> <p><img src="/assets/img/cpu&amp;gpu.d8a3a5a6.jpg" alt="CPU&amp;GPU"></p> <p>通过CPU与GPU结构上的对比我们可以看出，CPU功能模块很多，能适应复杂运算环境，大部分晶体管主要用于构建控制电路和Cache，只有少部分的晶体管来完成实际的运算工作。而GPU的控制相对简单，且对Cache的需求小，所以大部分晶体管可以组成各类专用电路、多条流水线，使得GPU的计算速度有了突破性的飞跃，拥有了更强大的运算的能力。</p> <p>CPU的控制器比较复杂，而运算器(ALU)比较少。因此CPU可以做复杂的逻辑运算，但是不擅长数学，尤其是浮点运算。</p> <p>对于绘制图像，就好比在画一幅画的时候CPU是用一支笔一笔一笔地画（或有限的几支笔），而GPU则是用多支笔对不同的位置同时进行描绘，那自然效率就是突飞猛进的。</p> <div class="custom-block tip"><p class="custom-block-title">总结对比</p> <p>从根本上说CPU和GPU它们的目的不同，且有不同侧重点，也有着不同的性能特性，在某些工作中CPU执行得更快，另一工作中或许GPU能更好。当你需要对大量数据做同样的事情时，GPU更合适，当你需要对同一数据做很多事情时，CPU正好。形象点理解，GPU就像一群蚂蚁，这些蚂蚁都做着同样的事，而CPU就像一只猴子，这只猴子做着各种不同的事。</p></div> <blockquote><p>参考文档：<a href="https://juejin.cn/post/6844903479102685192" target="_blank" rel="noopener noreferrer">从 CPU、GPU 再到 TPU，Google 的 AI 芯片是如何一步步进化过来的？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>参考文档：<a href="https://zhuanlan.zhihu.com/p/106385370" target="_blank" rel="noopener noreferrer">CPU和GPU的特点和区别<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="_3、process-进程-和thread-线程"><a href="#_3、process-进程-和thread-线程" class="header-anchor">#</a> 3、Process(进程)和Thread(线程)</h2> <p>下图是三层计算机体系结构，硬件位于底部，操作系统位于中间，应用层序则在最上层。通常应用程序使用操作系统提供的机制在CPU和GPU上运行。</p> <p><img src="/assets/img/computer.fd439fb4.jpeg" alt="computer"></p> <p>进程可以理解是应用程序的执行程序，线程则是存在于进行内部，并执行其进程程序的部分功能。</p> <p><img src="/assets/img/process.94be16ca.png" alt="process"></p> <p>进程作为线程的边界，而线程就像游动在进程中的鱼。</p> <p><img src="/assets/img/process1.8e7a53af.gif" alt="process1"></p> <p>进程可以通过操作系统，启动另一个进程来执行不同的任务。同时，系统将为新进程分配不同的内存。如果两个进程间需要通信，他们可以利用IPC的方式进行通信。</p> <p>许多应用程序都是以这种方式执行的，因此如果某个工作进程（例如一个选项卡）无响应，重启它，并不会影响相同应用程序的其他进程。</p> <p><img src="/assets/img/process2.2ab57248.gif" alt="process2"></p> <h2 id="_4、-浏览器架构"><a href="#_4、-浏览器架构" class="header-anchor">#</a> 4、 浏览器架构</h2> <p><em>关于如何构建Web浏览器没有标准规范，不同浏览器的架构可能完全不同。</em></p> <p>不过我们需要关注的是浏览器进程，如何与负责应用程序不同部分的其他进程协调。对于渲染器进程，将创建多个进程，并将其分配给每个选项卡。直到2018年9月份左右，Chrome才为每个标签提供了一个执行进程，现在它尝试为每个站点提供自己的进程，包括iframe。</p> <p><img src="/assets/img/chrome.d6d5e392.jpg" alt="chrome"></p> <p>如图所示，Chrome的多进程架构，渲染进程会显示多个图层，表示Chrome为每个选项卡运行多个渲染进程。</p> <h3 id="这些进程控制什么"><a href="#这些进程控制什么" class="header-anchor">#</a> 这些进程控制什么</h3> <p>下面介绍了每个Chrome进程以及其控制的范围</p> <ul><li>浏览器(Browser)：控制“Chrome”应用程序，包括地址栏、书签、后退和前进按钮等。还需要处理Web浏览器的权限管理，例如网络请求和文件访问。</li> <li>渲染器(Renderer)：控制选项卡内，网站里显示的所有内容。</li> <li>插件(Plugin)：控制网站使用的插件，如：Flash</li> <li>GPU: 独立于其他进程，专用于处理GPU任务，它被分成不同的进程，因为GPU会处理来着多个进程的请求，并将他们绘制在相同的Surface中。</li></ul> <p>不同的进程，用于处理Chrome的不同部分。</p> <p><img src="/assets/img/chrome1.d3205ab2.jpg" alt="chrome1"></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/browser/basics/homology/" class="prev">
        同源策略
      </a></span> <span class="next"><a href="/browser/chrome/performance/">
        Performance
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5fc96bdf.js" defer></script><script src="/assets/js/2.56cd01f5.js" defer></script><script src="/assets/js/6.2caff082.js" defer></script>
  </body>
</html>
