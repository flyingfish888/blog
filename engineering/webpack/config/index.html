<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>é…ç½®æ•´ç† | ä¼šé£çš„é±¼ğŸŸ</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="å­¦ä¹ ç¬”è®°">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.5fc96bdf.js" as="script"><link rel="preload" href="/assets/js/2.56cd01f5.js" as="script"><link rel="preload" href="/assets/js/64.5410a8b2.js" as="script"><link rel="prefetch" href="/assets/js/10.3ea21215.js"><link rel="prefetch" href="/assets/js/11.f2af6ae8.js"><link rel="prefetch" href="/assets/js/12.644b56f9.js"><link rel="prefetch" href="/assets/js/13.321b16b6.js"><link rel="prefetch" href="/assets/js/14.c75e2d6b.js"><link rel="prefetch" href="/assets/js/15.5b62c749.js"><link rel="prefetch" href="/assets/js/16.1365c67d.js"><link rel="prefetch" href="/assets/js/17.b89f8d5a.js"><link rel="prefetch" href="/assets/js/18.c2b2881c.js"><link rel="prefetch" href="/assets/js/19.793ae888.js"><link rel="prefetch" href="/assets/js/20.ceb40dc7.js"><link rel="prefetch" href="/assets/js/21.3872ab50.js"><link rel="prefetch" href="/assets/js/22.cdd80890.js"><link rel="prefetch" href="/assets/js/23.b89f5df5.js"><link rel="prefetch" href="/assets/js/24.00cc879e.js"><link rel="prefetch" href="/assets/js/25.e7d9e711.js"><link rel="prefetch" href="/assets/js/26.38dfa295.js"><link rel="prefetch" href="/assets/js/27.42e5a51b.js"><link rel="prefetch" href="/assets/js/28.f29c5a5a.js"><link rel="prefetch" href="/assets/js/29.9c1152d0.js"><link rel="prefetch" href="/assets/js/3.5ad5b76e.js"><link rel="prefetch" href="/assets/js/30.fb98a7fd.js"><link rel="prefetch" href="/assets/js/31.587a4c4e.js"><link rel="prefetch" href="/assets/js/32.07d3f2a3.js"><link rel="prefetch" href="/assets/js/33.330ca2ab.js"><link rel="prefetch" href="/assets/js/34.644b8fec.js"><link rel="prefetch" href="/assets/js/35.2a59dd03.js"><link rel="prefetch" href="/assets/js/36.f24a64fb.js"><link rel="prefetch" href="/assets/js/37.4c48b883.js"><link rel="prefetch" href="/assets/js/38.e2ef6b4b.js"><link rel="prefetch" href="/assets/js/39.560ec89f.js"><link rel="prefetch" href="/assets/js/4.a64d0739.js"><link rel="prefetch" href="/assets/js/40.e9e6f1a1.js"><link rel="prefetch" href="/assets/js/41.c2b76d48.js"><link rel="prefetch" href="/assets/js/42.a837ca06.js"><link rel="prefetch" href="/assets/js/43.e6231a11.js"><link rel="prefetch" href="/assets/js/44.a06340cd.js"><link rel="prefetch" href="/assets/js/45.2e753f17.js"><link rel="prefetch" href="/assets/js/46.67d5bfd7.js"><link rel="prefetch" href="/assets/js/47.79d98f76.js"><link rel="prefetch" href="/assets/js/48.a27665a5.js"><link rel="prefetch" href="/assets/js/49.61035e35.js"><link rel="prefetch" href="/assets/js/5.05ac1e95.js"><link rel="prefetch" href="/assets/js/50.23d10ba5.js"><link rel="prefetch" href="/assets/js/51.ffd94a50.js"><link rel="prefetch" href="/assets/js/52.72645a49.js"><link rel="prefetch" href="/assets/js/53.fddcc9c3.js"><link rel="prefetch" href="/assets/js/54.29a19228.js"><link rel="prefetch" href="/assets/js/55.9dd56225.js"><link rel="prefetch" href="/assets/js/56.97ccbdc2.js"><link rel="prefetch" href="/assets/js/57.b5653684.js"><link rel="prefetch" href="/assets/js/58.5022402f.js"><link rel="prefetch" href="/assets/js/59.2788a4dc.js"><link rel="prefetch" href="/assets/js/6.2caff082.js"><link rel="prefetch" href="/assets/js/60.3a36e8b6.js"><link rel="prefetch" href="/assets/js/61.a58c0429.js"><link rel="prefetch" href="/assets/js/62.22142950.js"><link rel="prefetch" href="/assets/js/63.eb63df3a.js"><link rel="prefetch" href="/assets/js/65.05534a28.js"><link rel="prefetch" href="/assets/js/66.345d568d.js"><link rel="prefetch" href="/assets/js/67.6d6c908d.js"><link rel="prefetch" href="/assets/js/68.48f8f647.js"><link rel="prefetch" href="/assets/js/69.0880f127.js"><link rel="prefetch" href="/assets/js/7.92af244d.js"><link rel="prefetch" href="/assets/js/70.6190682a.js"><link rel="prefetch" href="/assets/js/71.aef1621f.js"><link rel="prefetch" href="/assets/js/72.701beefb.js"><link rel="prefetch" href="/assets/js/73.5049b0f0.js"><link rel="prefetch" href="/assets/js/74.951b2541.js"><link rel="prefetch" href="/assets/js/75.a448589d.js"><link rel="prefetch" href="/assets/js/76.5245fdac.js"><link rel="prefetch" href="/assets/js/77.f76382e3.js"><link rel="prefetch" href="/assets/js/78.df1f1d7c.js"><link rel="prefetch" href="/assets/js/8.eef37b1f.js"><link rel="prefetch" href="/assets/js/9.e99284fe.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ä¼šé£çš„é±¼ğŸŸ</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯åŸºç¡€" class="dropdown-title"><span class="title">å‰ç«¯åŸºç¡€</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯åŸºç¡€" class="mobile-dropdown-title"><span class="title">å‰ç«¯åŸºç¡€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basics/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/basics/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/basics/html/" class="nav-link">
  HTML
</a></li></ul></div></div><div class="nav-item"><a href="/frame/" class="nav-link">
  å‰ç«¯æ¡†æ¶
</a></div><div class="nav-item"><a href="/engineering/" class="nav-link router-link-active">
  å‰ç«¯å·¥ç¨‹åŒ–
</a></div><div class="nav-item"><a href="/project-practice/" class="nav-link">
  é¡¹ç›®å®è·µ
</a></div><div class="nav-item"><a href="/browser/" class="nav-link">
  æµè§ˆå™¨
</a></div><div class="nav-item"><a href="/computer/" class="nav-link">
  è®¡ç®—æœºåŸºç¡€
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯åŸºç¡€" class="dropdown-title"><span class="title">å‰ç«¯åŸºç¡€</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯åŸºç¡€" class="mobile-dropdown-title"><span class="title">å‰ç«¯åŸºç¡€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basics/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/basics/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/basics/html/" class="nav-link">
  HTML
</a></li></ul></div></div><div class="nav-item"><a href="/frame/" class="nav-link">
  å‰ç«¯æ¡†æ¶
</a></div><div class="nav-item"><a href="/engineering/" class="nav-link router-link-active">
  å‰ç«¯å·¥ç¨‹åŒ–
</a></div><div class="nav-item"><a href="/project-practice/" class="nav-link">
  é¡¹ç›®å®è·µ
</a></div><div class="nav-item"><a href="/browser/" class="nav-link">
  æµè§ˆå™¨
</a></div><div class="nav-item"><a href="/computer/" class="nav-link">
  è®¡ç®—æœºåŸºç¡€
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/engineering/gulp/" class="sidebar-link">Gulp</a></li><li><section class="sidebar-group depth-0"><a href="/engineering/webpack/" class="sidebar-heading clickable router-link-active open"><span>Webpack</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/engineering/webpack/config/" aria-current="page" class="active sidebar-link">é…ç½®æ•´ç†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/engineering/webpack/config/#å…¥å£åˆ†ç¦»" class="sidebar-link">å…¥å£åˆ†ç¦»</a></li><li class="sidebar-sub-header"><a href="/engineering/webpack/config/#html-webpack-plugin" class="sidebar-link">html-webpack-plugin</a></li><li class="sidebar-sub-header"><a href="/engineering/webpack/config/#clean-webpack-plugin" class="sidebar-link">clean-webpack-plugin</a></li><li class="sidebar-sub-header"><a href="/engineering/webpack/config/#source-map" class="sidebar-link">source map</a></li><li class="sidebar-sub-header"><a href="/engineering/webpack/config/#ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼" class="sidebar-link">ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼</a></li><li class="sidebar-sub-header"><a href="/engineering/webpack/config/#webpack-dev-serve" class="sidebar-link">webpack-dev-serve</a></li><li class="sidebar-sub-header"><a href="/engineering/webpack/config/#webpack-dev-middleware" class="sidebar-link">webpack-dev-middleware</a></li><li class="sidebar-sub-header"><a href="/engineering/webpack/config/#hot-module-replacement" class="sidebar-link">Hot Module Replacement</a></li><li class="sidebar-sub-header"><a href="/engineering/webpack/config/#namedmodulesplugin" class="sidebar-link">NamedModulesPlugin</a></li></ul></li><li><a href="/engineering/webpack/start/" class="sidebar-link">æ­å»ºä¸€ä¸ªç®€å•é¡¹ç›®</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="é…ç½®æ•´ç†"><a href="#é…ç½®æ•´ç†" class="header-anchor">#</a> é…ç½®æ•´ç†</h1> <p><em>webpackç‰ˆæœ¬ï¼šv4.23.1</em></p> <p><strong>ç®€å•åˆå§‹åŒ–</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>
	<span class="token function">npm</span> init -y
	<span class="token function">npm</span> <span class="token function">install</span> webpack webpack-cli --save-dev  <span class="token comment"># å®‰è£…webpackç›¸å…³å¼€å‘ä¾èµ–</span>

	npx webpack --config webpack.config.js <span class="token comment"># å¯ä»¥å°†è„šæœ¬ä½œä¸ºå…¥å£èµ·ç‚¹ï¼Œç„¶åè¾“å‡ºä¸ºmain.jsï¼Œå¦‚æœwebpack.config.jså­˜åœ¨ï¼Œå°†é»˜è®¤ä½¿ç”¨å®ƒï¼Œè¿™é‡Œä½¿ç”¨--configæ˜¯ä¸ºäº†è¡¨æ˜å¯ä»¥ä¼ é€’ä»»ä½•åç§°çš„é…ç½®æ–‡ä»¶ã€‚</span>

	<span class="token comment"># ä¸Šé¢çš„æ–¹å¼æ˜¯é€šè¿‡cliè¿è¡Œæœ¬åœ°webpackï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬å¯ä»¥åœ¨package.jsonæ·»åŠ ä¸€ä¸ªnpm è„šæœ¬ ï¼š</span>
	<span class="token string">&quot;scripts&quot;</span>:<span class="token punctuation">{</span>
		<span class="token string">&quot;build&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;webpack&quot;</span>
	<span class="token punctuation">}</span>
	<span class="token comment"># è¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨npm run buildå‘½ä»¤æ¥æ›¿ä»£æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„npxå‘½ä»¤ã€‚</span>
</code></pre></div><p>ä¸ºäº†ä»JavaScriptæ¨¡å—ä¸­importä¸€ä¸ªCSSæ–‡ä»¶ï¼Œéœ€è¦å®‰è£…å¹¶æ·»åŠ <code>style-loader</code>å’Œ<code>css-loader</code>å¹¶åœ¨<code>webpack.config.js</code>æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œå¹¶å¼•å…¥è§„åˆ™ã€‚åŒæ ·çš„é“ç†ï¼ŒåŠ è½½å›¾ç‰‡ä¹Ÿéœ€è¦ä½¿ç”¨å›¾ç‰‡åŠ è½½å™¨<code>file-loader</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token comment">// npm install --save-dev style-loader css-loader file-loader</span>
	
	module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
		entry<span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
		output<span class="token operator">:</span><span class="token punctuation">{</span>
			filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
			path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'dist'</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		module<span class="token operator">:</span> <span class="token punctuation">{</span>
			rules<span class="token operator">:</span> <span class="token punctuation">[</span>
				<span class="token punctuation">{</span>
					test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
					use<span class="token operator">:</span> <span class="token punctuation">[</span>
						<span class="token string">'style-loader'</span><span class="token punctuation">,</span>
						<span class="token string">'css-loader'</span>
					<span class="token punctuation">]</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
					test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|svg|jpg|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
					use<span class="token operator">:</span> <span class="token punctuation">[</span>
						<span class="token string">'file-loader'</span>
					<span class="token punctuation">]</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// webpackæ ¹æ®æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ¥ç¡®å®šåº”è¯¥æŸ¥æ‰¾å“ªäº›æ–‡ä»¶ï¼Œå¹¶å°†å…¶æä¾›ç»™æŒ‡å®šçš„loaderã€‚</span>
</code></pre></div><hr> <h2 id="å…¥å£åˆ†ç¦»"><a href="#å…¥å£åˆ†ç¦»" class="header-anchor">#</a> å…¥å£åˆ†ç¦»</h2> <p>åœ¨entryæ·»åŠ æ–°çš„å…¥å£èµ·ç‚¹ï¼Œç„¶åä¿®æ”¹outputï¼Œåˆ™ä¼šæ ¹æ®å…¥å£ç”Ÿæˆå¤šä¸ªjsæ–‡ä»¶ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
		entry<span class="token operator">:</span> <span class="token punctuation">{</span>
			app<span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
			print<span class="token operator">:</span> <span class="token string">'./src/print.js'</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		output<span class="token operator">:</span> <span class="token punctuation">{</span>
			filename<span class="token operator">:</span> <span class="token string">'[name].bundle.js'</span><span class="token punctuation">,</span>
			path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'dist'</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><h2 id="html-webpack-plugin"><a href="#html-webpack-plugin" class="header-anchor">#</a> html-webpack-plugin</h2> <p>HtmlWebpackPluginç®€åŒ–htmlæ–‡ä»¶çš„åˆ›å»ºï¼Œè‡ªåŠ¨åˆ›å»ºå¹¶æ›´æ–°htmlæ–‡ä»¶ï¼Œqè‡ªåŠ¨åŒ¹é…ä¸æ–­å˜åŒ–çš„æ–‡ä»¶ï¼Œçœå»äº†æ‰‹åŠ¨ç»´æŠ¤ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">let</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
		entry<span class="token operator">:</span><span class="token string">'index.js'</span><span class="token punctuation">,</span>
		output<span class="token operator">:</span><span class="token punctuation">{</span>
			path<span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			filename<span class="token operator">:</span><span class="token string">'[name].js'</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		plugins<span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>HtmlWebpackPluginçš„é…ç½®é¡¹</strong></p> <table><thead><tr><th style="text-align:center;">name</th> <th style="text-align:center;">type</th> <th style="text-align:center;">default</th> <th style="text-align:center;">description</th></tr></thead> <tbody><tr><td style="text-align:center;">title</td> <td style="text-align:center;">string</td> <td style="text-align:center;">Webpack App</td> <td style="text-align:center;">ç”¨äºç”Ÿæˆhtmlæ–‡æ¡£çš„æ ‡é¢˜</td></tr> <tr><td style="text-align:center;">filename</td> <td style="text-align:center;">string</td> <td style="text-align:center;">index.html</td> <td style="text-align:center;">è¦å†™å…¥htmlçš„æ–‡ä»¶ï¼Œé»˜è®¤ä¸º'index.html'ï¼Œåœ¨è¿™é‡Œå¯ä»¥æŒ‡å®šä¸€ä¸ªç›®å½•(eg:assets/admin.html)</td></tr> <tr><td style="text-align:center;">template</td> <td style="text-align:center;">string</td> <td style="text-align:center;">``</td> <td style="text-align:center;">webpackéœ€è¦æ¨¡æ¿çš„è·¯å¾„</td></tr> <tr><td style="text-align:center;">templateParameters</td> <td style="text-align:center;">Boolean/Object/Function</td> <td style="text-align:center;">``</td> <td style="text-align:center;">å…è®¸é‡å†™templateä¸­å¼•ç”¨çš„å‚æ•°</td></tr> <tr><td style="text-align:center;">templateContent</td> <td style="text-align:center;">string/function</td> <td style="text-align:center;">``</td> <td style="text-align:center;">ä¸€ä¸ªString/FunctionåŒ…å«templateå†…å®¹çš„å­—ç¬¦ä¸²ã€‚templateå’ŒtemplateContentä¸å¯åŒæ—¶ä½¿ç”¨</td></tr> <tr><td style="text-align:center;">inject</td> <td style="text-align:center;">Boolean/String</td> <td style="text-align:center;">true</td> <td style="text-align:center;">true/head/body/falseå°†æ‰€æœ‰çš„assetsæ³¨å…¥åˆ°ç»™å®šçš„templateæˆ–templateContentã€‚å½“ä¼ å…¥<code>true/body</code>æ—¶ï¼Œæ‰€æœ‰JavaScriptèµ„æºå°†æ”¾ç½®åœ¨bodyçš„åº•éƒ¨ã€‚ä¼ å…¥<code>head</code>å°†æŠŠè„šæœ¬æ”¾åœ¨headä¸­</td></tr> <tr><td style="text-align:center;">favicon</td> <td style="text-align:center;">String</td> <td style="text-align:center;">``</td> <td style="text-align:center;">å‘htmlè¾“å‡ºfaciconè·¯å¾„</td></tr> <tr><td style="text-align:center;">meta</td> <td style="text-align:center;">Object</td> <td style="text-align:center;">{}</td> <td style="text-align:center;">å…è®¸æ³¨å…¥metaæ ‡ç­¾</td></tr> <tr><td style="text-align:center;">minify</td> <td style="text-align:center;">Boolean/Object</td> <td style="text-align:center;">false</td> <td style="text-align:center;">å°†html-minifilerçš„é…ç½®ä½œä¸ºå¯¹è±¡æ¥ç¼©å°è¾“å‡º</td></tr> <tr><td style="text-align:center;">hash</td> <td style="text-align:center;">Boolean</td> <td style="text-align:center;">false</td> <td style="text-align:center;">å¦‚æœä¸º<code>true</code>ï¼Œåˆ™å°†å”¯ä¸€çš„webpackç¼–è¯‘hashè¿½åŠ åˆ°æ‰€æœ‰åŒ…å«jså’Œcssæ–‡ä»¶ä¸­ã€‚è¿™å¯¹äºç¼“å­˜å´©æºƒæ˜¯æœ‰ç”¨çš„</td></tr> <tr><td style="text-align:center;">cache</td> <td style="text-align:center;">Boolean</td> <td style="text-align:center;">true</td> <td style="text-align:center;">ä»…åœ¨æ–‡ä»¶è¢«æ›´æ”¹æ—¶æ‰å‘å‡ºè¯¥æ–‡ä»¶</td></tr> <tr><td style="text-align:center;">showErrors</td> <td style="text-align:center;">Boolean</td> <td style="text-align:center;">true</td> <td style="text-align:center;">é”™è¯¯è¯¦æƒ…å°†è¢«å†™åˆ°htmlé¡µé¢</td></tr> <tr><td style="text-align:center;">chunks</td> <td style="text-align:center;">{?}</td> <td style="text-align:center;">?</td> <td style="text-align:center;">å…è®¸åªæ·»åŠ ä¸€äº›chunks</td></tr> <tr><td style="text-align:center;">chunksSortMode</td> <td style="text-align:center;">String/Function</td> <td style="text-align:center;">auto</td> <td style="text-align:center;">å…è®¸æ§åˆ¶chunksè¢«åŒ…å«åˆ°htmlä¹‹å‰åº”è¯¥å¦‚ä½•æ’åºã€‚å…è®¸å€¼ï¼š<code>none/auto/dependency/manual/function</code></td></tr> <tr><td style="text-align:center;">excludeChunks</td> <td style="text-align:center;">Array</td> <td style="text-align:center;">``</td> <td style="text-align:center;">å…è®¸è·³è¿‡ä¸€äº›chunks</td></tr> <tr><td style="text-align:center;">xhtml</td> <td style="text-align:center;">Boolean</td> <td style="text-align:center;">false</td> <td style="text-align:center;">å¦‚æœä¸º<code>true</code>è®¾ç½®linkæ ‡ç­¾ä¸ºè‡ªåŠ¨å…³é—­</td></tr></tbody></table> <h2 id="clean-webpack-plugin"><a href="#clean-webpack-plugin" class="header-anchor">#</a> clean-webpack-plugin</h2> <p>æ¸…ç†distæ–‡ä»¶å¤¹</p> <p>ç”±äºè¿‡å»çš„ä»£ç ä¼šé—ç•™åœ¨distä¸­ï¼Œå¯¼è‡´distç›®å½•éå¸¸æ··ä¹±ï¼Œwebpackæ— æ³•è¿½è¸ªåˆ°å“ªäº›æ–‡ä»¶æ˜¯å®é™…åœ¨é¡¹ç›®ä¸­ç”¨åˆ°çš„ã€‚å› æ­¤æ¨èåœ¨æ¯æ¬¡æ„å»ºå‰æ¸…ç†distæ–‡ä»¶å¤¹ï¼Œå¦‚æ­¤ä¾¿åªä¼šç”Ÿæˆç”¨åˆ°çš„æ–‡ä»¶ï¼Œä¸‹é¢çš„æ’ä»¶å¯ä»¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼š</p> <p><code>npm i clean-webpack-plugin --save-dev</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">const</span> CleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//webpack config</span>
	<span class="token punctuation">{</span>
		plugins<span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span>paths<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>options<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
        
	<span class="token comment">// options and defaults(Options)ï¼Œä¸‹é¢æ˜¯è¯¥æ’ä»¶çš„ä¸€äº›é…ç½®é€‰é¡¹ï¼Œä¸éœ€è¦å†é¡¹ç›®ä¸­éƒ½é…ç½®ã€‚</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// webpackæ ¹æ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„ï¼Œé»˜è®¤ï¼špackage.jsonæ‰€åœ¨çš„æ ¹ç›®å½•</span>
		root<span class="token operator">:</span> __dirname<span class="token punctuation">,</span>
		<span class="token comment">// å‘consoleå†™æ—¥å¿—</span>
		werbose<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token comment">// ä½¿ç”¨'true'æ¥æµ‹è¯•æˆ–ä»¿çœŸåˆ é™¤ï¼ˆå°†ä¸ä¼šç§»é™¤æ–‡ä»¶ï¼‰</span>
		<span class="token comment">// é»˜è®¤å€¼ï¼š'false'ï¼Œç§»é™¤æ–‡ä»¶</span>

		dry<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// å¦‚æœä¸º'true'ï¼Œåˆ™åˆ é™¤æ–‡ä»¶é‡æ–°ç¼–è¯‘</span>

		watch<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token comment">// Instead of removing whole path recursively,</span>
  		<span class="token comment">// remove all path's content with exclusion of provided immediate children.</span>
  		<span class="token comment">// Good for not removing shared files from build directories.</span>
  		exclude<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">'files'</span><span class="token punctuation">,</span> <span class="token string">'to'</span><span class="token punctuation">,</span> <span class="token string">'ignore'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  		<span class="token comment">// å…è®¸æ’ä»¶æ¸…ç†webpackç›®å½•ä»¥å¤–çš„æ–‡ä»¶å¤¹</span>
  		allowExternal<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
  		<span class="token comment">//åœ¨æ–‡ä»¶è¢«å‘é€çš„outputæ–‡ä»¶å¤¹ä¹‹å‰æ‰§è¡Œæ¸…ç†</span>
  		beforeEmit<span class="token operator">:</span><span class="token boolean">false</span>
	<span class="token punctuation">}</span>
</code></pre></div><h2 id="source-map"><a href="#source-map" class="header-anchor">#</a> source map</h2> <p>å½“webpackæ‰“åŒ…æºä»£ç æ—¶ï¼Œå¯èƒ½ä¼šå¾ˆéš¾è¿½è¸ªåˆ°é”™è¯¯å’Œè­¦å‘Šåœ¨æºä»£ç ä¸­çš„åŸå§‹ä½ç½®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå°†ä¸‰ä¸ªæºæ–‡ä»¶ï¼ˆa.js,b.jså’Œc.jsï¼‰æ‰“åŒ…åˆ°ä¸€ä¸ªbundleä¸­ï¼Œè€Œå…¶ä¸­ä¸€ä¸ªæºæ–‡ä»¶åŒ…å«ä¸€ä¸ªé”™è¯¯ï¼Œé‚£ä¹ˆå †æ ˆè·Ÿè¸ªå°±ä¼šç®€å•åœ°æŒ‡å‘åˆ°bundle.jsã€‚è¿™å¹¶æ²¡æœ‰å¤ªå¤šå¸®åŠ©ï¼Œå› ä¸ºä½ å¯èƒ½éœ€è¦å‡†ç¡®åœ°çŸ¥é“é”™è¯¯æ¥è‡ªäºå“ªä¸ªæºæ–‡ä»¶ã€‚</p> <p>ä¸ºäº†æ›´å®¹æ˜“åœ°è¿½è¸ªé”™è¯¯å’Œè­¦å‘Šï¼ŒJavaScriptæä¾›äº†<code>source map</code>åŠŸèƒ½ï¼Œå°†ç¼–è¯‘åçš„ä»£ç æ˜ å°„å›åŸå§‹æºä»£ç ã€‚</p> <p>source mapæœ‰å¾ˆå¤šä¸åŒçš„é€‰é¡¹å¯ç”¨ï¼Œå¦‚ä¸‹ï¼š</p> <table><thead><tr><th style="text-align:right;">devtool</th> <th style="text-align:center;">æ„å»ºé€Ÿåº¦</th> <th style="text-align:center;">é‡æ–°æ„å»ºé€Ÿåº¦</th> <th style="text-align:center;">ç”Ÿäº§ç¯å¢ƒ</th> <th style="text-align:center;">å“è´¨</th></tr></thead> <tbody><tr><td style="text-align:right;">(none)</td> <td style="text-align:center;">+++</td> <td style="text-align:center;">+++</td> <td style="text-align:center;">yes</td> <td style="text-align:center;">æ‰“åŒ…åçš„ä»£ç </td></tr> <tr><td style="text-align:right;">eval</td> <td style="text-align:center;">+++</td> <td style="text-align:center;">+++</td> <td style="text-align:center;">no</td> <td style="text-align:center;">ç”Ÿæˆåçš„ä»£ç </td></tr> <tr><td style="text-align:right;">eval-source-map</td> <td style="text-align:center;">--</td> <td style="text-align:center;">+</td> <td style="text-align:center;">no</td> <td style="text-align:center;">åŸå§‹æºä»£ç </td></tr> <tr><td style="text-align:right;">cheap-eval-source-map</td> <td style="text-align:center;">+</td> <td style="text-align:center;">++</td> <td style="text-align:center;">no</td> <td style="text-align:center;">è½¬æ¢è¿‡çš„ä»£ç ï¼ˆä»…é™è¡Œï¼‰</td></tr> <tr><td style="text-align:right;">cheap-module-eval-source-map</td> <td style="text-align:center;">o</td> <td style="text-align:center;">++</td> <td style="text-align:center;">no</td> <td style="text-align:center;">åŸå§‹æºä»£ç ï¼ˆä»…é™è¡Œï¼‰</td></tr> <tr><td style="text-align:right;">source-map</td> <td style="text-align:center;">--</td> <td style="text-align:center;">--</td> <td style="text-align:center;">yes</td> <td style="text-align:center;">åŸå§‹æºä»£ç </td></tr> <tr><td style="text-align:right;">inline-source-map</td> <td style="text-align:center;">--</td> <td style="text-align:center;">--</td> <td style="text-align:center;">no</td> <td style="text-align:center;">åŸå§‹æºä»£ç </td></tr> <tr><td style="text-align:right;">hidden-source-map</td> <td style="text-align:center;">--</td> <td style="text-align:center;">--</td> <td style="text-align:center;">yes</td> <td style="text-align:center;">åŸå§‹æºä»£ç </td></tr> <tr><td style="text-align:right;">nosources-source-map</td> <td style="text-align:center;">--</td> <td style="text-align:center;">--</td> <td style="text-align:center;">yes</td> <td style="text-align:center;">æ— æºä»£ç å†…å®¹</td></tr> <tr><td style="text-align:right;">cheap-source-map</td> <td style="text-align:center;">+</td> <td style="text-align:center;">o</td> <td style="text-align:center;">no</td> <td style="text-align:center;">è½¬æ¢è¿‡çš„ä»£ç ï¼ˆä»…é™è¡Œï¼‰</td></tr> <tr><td style="text-align:right;">cheap-module-source-map</td> <td style="text-align:center;">o</td> <td style="text-align:center;">-</td> <td style="text-align:center;">no</td> <td style="text-align:center;">åŸå§‹æºä»£ç ï¼ˆä»…é™è¡Œï¼‰</td></tr> <tr><td style="text-align:right;">inline-cheap-source-map</td> <td style="text-align:center;">+</td> <td style="text-align:center;">o</td> <td style="text-align:center;">no</td> <td style="text-align:center;">è½¬æ¢è¿‡çš„ä»£ç ï¼ˆä»…é™è¡Œï¼‰</td></tr> <tr><td style="text-align:right;">inline-cheap-module-source-map</td> <td style="text-align:center;">o</td> <td style="text-align:center;">-</td> <td style="text-align:center;">no</td> <td style="text-align:center;">åŸå§‹æºä»£ç ï¼ˆä»…é™è¡Œï¼‰</td></tr></tbody></table> <p><em>æ³¨ï¼š <code>+++</code> éå¸¸å¿«ï¼Œ<code>++</code> å¿«é€Ÿï¼Œ<code>+</code> æ¯”è¾ƒå¿«ï¼Œ<code>o</code> ä¸­ç­‰ï¼Œ<code>-</code> æ¯”è¾ƒæ…¢ï¼Œ<code>--</code> æ…¢</em></p> <p>å…¶ä¸­ä¸€äº›å€¼é€‚ç”¨äºå¼€å‘ç¯å¢ƒï¼Œä¸€äº›é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚å¯¹äºå¼€å‘ç¯å¢ƒï¼Œé€šå¸¸å¸Œæœ›æ›´å¿«çš„source mapï¼Œéœ€è¦æ·»åŠ åˆ°bundleä¸­ä»¥å¢åŠ ä½“ç§¯ä¸ºä»£ä»·ï¼Œä½†æ˜¯å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œåˆ™å¸Œæœ›æ›´ç²¾ç¡®çš„source mapï¼Œéœ€è¦ä»bundleä¸­åˆ†ç¦»å¹¶ç‹¬ç«‹å­˜åœ¨ã€‚</p> <p><strong>å“è´¨è¯´æ˜</strong></p> <ul><li>æ‰“åŒ…åçš„ä»£ç : å°†æ‰€æœ‰ç”Ÿæˆçš„ä»£ç è§†ä¸ºä¸€å¤§å—ä»£ç ï¼Œä½ çœ‹ä¸åˆ°ç›¸äº’åˆ†ç¦»çš„æ¨¡å—ã€‚</li> <li>ç”Ÿæˆåçš„ä»£ç : æ¯ä¸ªæ¨¡å—ç›¸äº’åˆ†ç¦»ï¼Œå¹¶ç”¨æ¨¡å—åç§°è¿›è¡Œæ³¨é‡Šã€‚å¯ä»¥çœ‹åˆ°webpackç”Ÿæˆçš„ä»£ç ã€‚
<ul><li>ç¤ºä¾‹ï¼šä½ ä¼šçœ‹åˆ°ç±»ä¼¼ <code>var module_WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(42);module__WEBPACK_IMPORTED_MODULE_1__.a();</code> è€Œä¸æ˜¯ <code>import {test} from &quot;module&quot;; test();</code></li></ul></li> <li>è½¬æ¢è¿‡çš„ä»£ç : æ¯ä¸ªæ¨¡å—ç›¸äº’åˆ†ç¦»ï¼Œå¹¶ç”¨æ¨¡å—åç§°è¿›è¡Œæ³¨é‡Šã€‚å¯ä»¥çœ‹åˆ°webpackè½¬æ¢å‰ã€loaderè½¬è¯‘åçš„ä»£ç ã€‚
<ul><li>ç¤ºä¾‹ï¼šä¼šçœ‹åˆ°ç±»ä¼¼<code>import {test} from &quot;module&quot;; var A = function(_test) { ... }(test);</code> è€Œä¸æ˜¯ <code>import {test} from &quot;module&quot;; class A extends test {}</code></li></ul></li> <li>åŸå§‹æºä»£ç : æ¯ä¸ªæ¨¡å—ç›¸äº’åˆ†ç¦»ï¼Œå¹¶ç”¨æ¨¡å—åç§°è¿›è¡Œæ³¨é‡Šã€‚
<ul><li>å¯ä»¥çœ‹åˆ°è½¬è¯‘ä¹‹å‰çš„ä»£ç ï¼Œæ­£å¦‚ç¼–å†™å®ƒæ—¶ã€‚è¿™å–å†³äºloaderæ”¯æŒã€‚</li></ul></li> <li>æ— æºä»£ç å†…å®¹: source mapä¸­ä¸åŒ…å«æºä»£ç å†…å®¹ã€‚
<ul><li>æµè§ˆå™¨é€šå¸¸ä¼šå°è¯•ä»webæœåŠ¡å™¨æˆ–æ–‡ä»¶ç³»ç»ŸåŠ è½½æºä»£ç ã€‚å¿…é¡»ä¿è¯æ­£ç¡®è®¾ç½®<code>output.devtoolModuleFilenameTemplate</code>ï¼Œä»¥åŒ¹é…æºä»£ç çš„urlã€‚</li></ul></li> <li>ï¼ˆä»…é™è¡Œï¼‰: source map è¢«ç®€åŒ–ä¸ºæ¯è¡Œæ‰§è¡Œä¸€ä¸ªæ˜ å°„ã€‚
<ul><li>è¿™é€šå¸¸æ„å‘³ç€æ¯ä¸ªè¯­å¥åªæœ‰ä¸€ä¸ªæ˜ å°„ã€‚è¿™ä¼šå¦¨ç¢ä½ åœ¨è¯­å¥çº§åˆ«ä¸Šè°ƒè¯•æ‰§è¡Œï¼Œä¹Ÿä¼šå¦¨ç¢ä½ åœ¨æ¯è¡Œçš„ä¸€äº›åˆ—ä¸Šè®¾ç½®æ–­ç‚¹ã€‚ä¸å‹ç¼©åçš„ä»£ç ç»„åˆåï¼Œæ˜ å°„å…³ç³»æ˜¯ä¸å¯èƒ½å®ç°çš„ï¼Œå› ä¸ºå‹ç¼©å·¥å…·é€šå¸¸åªä¼šè¾“å‡ºä¸€è¡Œã€‚</li></ul></li></ul> <p><strong>å¯¹äºå¼€å‘ç¯å¢ƒï¼Œä»¥ä¸‹é€‰é¡¹éå¸¸é€‚åˆå¼€å‘ç¯å¢ƒï¼š</strong></p> <ul><li><p><code>eval</code>ï¼š æ¯ä¸ªæ¨¡å—éƒ½æ˜¯ç”¨eval()æ‰§è¡Œï¼Œå¹¶ä¸”éƒ½æœ‰<code>//@ sourceURL</code> ã€‚</p> <ul><li>æ­¤é€‰é¡¹ä¼šéå¸¸å¿«åœ°æ„å»ºã€‚ä¸»è¦ç¼ºç‚¹æ˜¯ï¼šç”±äºä¼šæ˜ å°„åˆ°è½¬æ¢åçš„ä»£ç ï¼Œè€Œä¸æ˜¯æ˜ å°„åˆ°åŸå§‹ä»£ç ï¼ˆæ²¡æœ‰ä»loaderä¸­è·å–source mapï¼‰ï¼Œæ‰€ä»¥ä¸èƒ½æ­£ç¡®çš„æ˜¾ç¤ºè¡Œæ•°ã€‚</li></ul></li> <li><p><code>eval-source-map</code>ï¼š æ¯ä¸ªæ¨¡å—ä½¿ç”¨<code>eval()</code>æ‰§è¡Œï¼Œå¹¶ä¸”source mapè½¬æ¢ä¸ºDataUrlåæ·»åŠ åˆ°eval()ä¸­ã€‚</p> <ul><li>åˆå§‹åŒ–source mapæ—¶æ¯”è¾ƒæ…¢ï¼Œä½†æ˜¯ä¼šåœ¨é‡æ–°æ„å»ºæ—¶æä¾›æ¯”è¾ƒå¿«çš„é€Ÿåº¦ï¼Œå¹¶ä¸”ç”Ÿæˆå®é™…çš„æ–‡ä»¶ã€‚è¡Œæ•°èƒ½å¤Ÿæ­£ç¡®æ˜ å°„ï¼Œå› ä¸ºä¼šæ˜ å°„åˆ°åŸå§‹ä»£ç ä¸­ã€‚å®ƒä¼šç”Ÿæˆç”¨äºå¼€å‘ç¯å¢ƒçš„æœ€ä½³å“è´¨çš„source mapã€‚</li></ul></li> <li><p><code>cheap-eval-source-map</code>ï¼š ç±»ä¼¼<code>eval-source-map</code>ï¼Œæ¯ä¸ªæ¨¡å—ä½¿ç”¨eval()æ‰§è¡Œã€‚
-è¿™æ˜¯&quot;cheap(ä½å¼€é”€)&quot;çš„source mapï¼Œå› ä¸ºå®ƒæ²¡æœ‰ç”Ÿæˆåˆ—æ˜ å°„ï¼Œåªæ˜¯æ˜ å°„è¡Œæ•°ã€‚å®ƒä¼šå¿½ç•¥æºè‡ªloaderçš„source mapï¼Œå¹¶ä¸”ä»…æ˜¾ç¤ºè½¬è¯‘åçš„ä»£ç ï¼Œå°±åƒ<code>eval</code>devtool.</p></li> <li><p><code>cheap-module-eval-source-map</code>ï¼šç±»ä¼¼ <code>cheap-eval-source-map</code> ï¼Œå¹¶ä¸”åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæºè‡ªloaderçš„source mapä¼šå¾—åˆ°æ›´å¥½çš„å¤„ç†ç»“æœã€‚ç„¶è€Œï¼Œ<code>loader source map</code>ä¼šè¢«ç®€åŒ–ä¸ºæ¯è¡Œä¸€ä¸ªæ˜ å°„ã€‚</p></li></ul> <p><strong>å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œä»¥ä¸‹é€‰é¡¹é€šå¸¸ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼š</strong></p> <ul><li><p><code>(none)</code>ï¼š ä¸ç”Ÿæˆsource mapã€‚è¿™æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p></li> <li><p><code>source-map</code>ï¼šæ•´ä¸ªsource map ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ç”Ÿæˆã€‚</p> <ul><li>å®ƒä¸ºbundleæ·»åŠ äº†ä¸€ä¸ªå¼•ç”¨æ³¨é‡Šï¼Œä»¥ä¾¿å¼€å‘å·¥å…·çŸ¥é“åˆ°åœ¨å“ªé‡Œå¯ä»¥æ‰¾åˆ°å®ƒã€‚æ³¨ï¼šæ­¤æ—¶åº”è¯¥å°†æœåŠ¡å™¨è®¾ç½®ä¸ºä¸å…è®¸æ™®é€šç”¨æˆ·è®¿é—®<code>source map</code>æ–‡ä»¶ï¼</li></ul></li> <li><p><code>hidden-source-map</code>ï¼šä¸<code>source-map</code>ç›¸åŒï¼Œä½†ä¸ä¼šä¸ºbundleæ·»åŠ å¼•ç”¨æ³¨é‡Šã€‚</p> <ul><li>å¦‚æœä½ åªæƒ³<code>source map</code>æ˜ å°„é‚£äº›æºè‡ªé”™è¯¯æŠ¥å‘Šçš„é”™è¯¯å †æ ˆè·Ÿè¸ªä¿¡æ¯æºè‡ªé”™è¯¯æŠ¥å‘Šçš„å †æ ˆè·Ÿè¸ªä¿¡æ¯ï¼Œä½†ä¸æƒ³ä¸ºæµè§ˆå™¨å¼€å‘å·¥å…·æš´éœ²ä½ çš„<code>source map</code>ï¼Œè¿™ä¸ªé€‰é¡¹ä¼šå¾ˆæœ‰ç”¨ã€‚</li></ul></li> <li><p><code>nosources-source-map</code>ï¼šåˆ›å»ºçš„<code>source map</code>ä¸åŒ…å«sourcesContent(æºä»£ç å†…å®¹)ã€‚</p> <ul><li>å®ƒå¯ä»¥æ˜ å°„å®¢æˆ·ç«¯ä¸Šçš„å †æ ˆè·Ÿè¸ªï¼Œè€Œæ— éœ€æš´éœ²æ‰€æœ‰çš„æºä»£ç ã€‚å¯ä»¥å°†<code>source map</code>æ–‡ä»¶éƒ¨ç½²åˆ°webæœåŠ¡å™¨ã€‚æ³¨ï¼šè¿™ä»ç„¶ä¼šæš´éœ²åç¼–è¯‘åçš„æ–‡ä»¶åå’Œç»“æœï¼Œä½†å®ƒä¸ä¼šæš´éœ²åŸå§‹ä»£ç ã€‚</li></ul></li></ul> <p><strong>ç‰¹æ®Šåœºæ™¯</strong></p> <p>ä»¥ä¸‹é€‰é¡¹å¯¹äºå¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒå¹¶ä¸ç†æƒ³ã€‚ä»–ä»¬æ˜¯ä¸€äº›ç‰¹å®šåœºæ™¯ä¸‹éœ€è¦çš„ï¼Œä¾‹å¦‚ï¼Œé’ˆå¯¹ä¸€äº›ç¬¬ä¸‰æ–¹å·¥å…·ã€‚</p> <ul><li><code>inline-source-map</code>ï¼šsource mapè½¬æ¢ä¸ºdataUrlåæ·»åŠ åˆ°bundleä¸­ã€‚</li> <li><code>cheap-source-map</code>ï¼š æ²¡æœ‰åˆ—æ˜ å°„çš„<code>source map</code>ï¼Œå¿½ç•¥<code>loader source map</code>ã€‚</li> <li><code>inline-cheap-source-map</code>ï¼šç±»ä¼¼<code>cheap-source-map</code>ï¼Œä½†æ˜¯<code>source map</code>è½¬æ¢ä¸ºDataUrlåæ·»åŠ åˆ°bundleä¸­ã€‚</li> <li><code>cheap-module-source-map</code>ï¼šæ²¡æœ‰åˆ—æ˜ å°„çš„<code>source map</code>ï¼Œå°†<code>loader source map</code>ç®€åŒ–ä¸ºæ¯è¡Œä¸€ä¸ªæ˜ å°„ã€‚</li> <li><code>inline-cheap-module-source-map</code>ï¼šç±»ä¼¼<code>cheap-module-source-map</code>ï¼Œä½†æ˜¯<code>source map</code>è½¬æ¢ä¸ºDataUrlæ·»åŠ åˆ°bundleä¸­ã€‚</li></ul> <h2 id="ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼"><a href="#ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼" class="header-anchor">#</a> ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼</h2> <p>ä¸Šé¢çš„æ¯æ¬¡ä¿®æ”¹æˆ‘ä»¬éƒ½éœ€è¦è¿è¡Œ<code>npm run build</code>æ¥é‡æ–°ç¼–è¯‘é¡¹ç›®ï¼Œè§‚å¯Ÿè€…æ¨¡å¼ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬ç›‘å¬æ–‡ä»¶çš„ä¿®æ”¹ï¼Œä¸è¿‡ä¸ä¼šè§¦å‘æµè§ˆå™¨åˆ·æ–°ï¼Œè¿˜æ˜¯éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨åˆ·æ–°é¡µé¢ã€‚</p> <div class="language-json extra-class"><pre class="language-json"><code>   <span class="token comment">//package.json</span>
   <span class="token punctuation">{</span>
   		<span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
   			<span class="token property">&quot;watch&quot;</span><span class="token operator">:</span><span class="token string">&quot;webpack --watch&quot;</span>
   		<span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
   <span class="token comment">//å¦‚æ­¤ç›´æ¥è¿è¡Œnpm run watchå°±å¯ä»¥ç›‘å¬å˜åŒ–äº†</span>
</code></pre></div><h2 id="webpack-dev-serve"><a href="#webpack-dev-serve" class="header-anchor">#</a> webpack-dev-serve</h2> <p>webpack-dev-serveæä¾›äº†ä¸€ä¸ªç®€å•çš„webæœåŠ¡å™¨ï¼Œå¹¶ä¸”èƒ½å¤Ÿå®æ—¶é‡æ–°åŠ è½½ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token comment">// å®‰è£…å¼€å‘ä¾èµ– npm install --save-dev webpack-dev-server</span>
	<span class="token comment">// webpack.config.jsï¼Œå‘Šè¯‰dev serveråœ¨å“ªé‡ŒæŸ¥æ‰¾æ–‡ä»¶</span>
	module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
		devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
			contentBase<span class="token operator">:</span> <span class="token string">'./dist'</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// package.json</span>
	<span class="token punctuation">{</span>
		<span class="token string">&quot;start&quot;</span><span class="token operator">:</span><span class="token string">&quot;webpack-dev-server --open&quot;</span>
	<span class="token punctuation">}</span>
</code></pre></div><p>ä¸Šé¢çš„é…ç½®å‘Šè¯‰<code>webpack-dev-server</code>ï¼Œåœ¨<code>localhost:8080</code>ä¸‹å»ºç«‹æœåŠ¡å™¨ï¼Œå°†distç›®å½•ä¸‹çš„æ–‡ä»¶ä½œä¸ºå¯è®¿é—®æ–‡ä»¶ã€‚æ­¤æ—¶æ–‡ä»¶æ›´æ”¹ä¸ä»…å—åˆ°ç›‘å¬ï¼ŒåŒæ—¶è¿˜èƒ½è§¦å‘æµè§ˆå™¨çš„è‡ªåŠ¨åˆ·æ–°ã€‚</p> <p><strong>webpack-dev-serverå¸¦æœ‰è®¸å¤šå¯é…ç½®çš„é€‰é¡¹</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token punctuation">{</span>
		<span class="token comment">// æä¾›åœ¨æœåŠ¡å™¨å†…éƒ¨çš„æ‰€æœ‰å…¶ä»–ä¸­é—´ä»¶æ‰§è¡Œä¹‹å‰æ‰§è¡Œè‡ªå®šä¹‰ä¸­é—´ä»¶çš„èƒ½åŠ›ï¼Œè¿™å¯ä»¥ç”¨æ¥è‡ªå®šä¹‰å¤„ç†æ“ä½œã€‚</span>
		<span class="token function">before</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/some/path'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span>custom<span class="token operator">:</span><span class="token string">'response'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// æä¾›åœ¨æœåŠ¡å™¨å†…éƒ¨çš„æ‰€æœ‰å…¶ä»–ä¸­é—´ä»¶æ‰§è¡Œå®Œä¹‹åæ‰§è¡Œè‡ªå®šä¹‰ä¸­é—´ä»¶çš„èƒ½åŠ›</span>
		<span class="token function">after</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// è®¾ç½®å…è®¸è®¿é—®devServeræœåŠ¡å™¨çš„ç™½åå•ï¼Œä»¥.å¼€å¤´å¯ä»¥ä½œä¸ºå­åŸŸåé€šé…ç¬¦ã€‚ä¾‹å¦‚'.host1.com'ï¼Œå°†åŒ¹é…'host.com'/'www.host.com'ç­‰</span>
		<span class="token comment">// ä¹Ÿå¯ä»¥åœ¨CLIä¸­è¿›è¡Œé…ç½®ï¼Œå¦‚ä¸‹</span>
		<span class="token comment">//webpack-dev-server --entry /entry/file --output-path /output/path --allowed-hosts .host.com,host2.com</span>
		allowedHosts<span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">'host.com'</span><span class="token punctuation">,</span>
			<span class="token string">'subdomain.host.com'</span><span class="token punctuation">,</span>
			<span class="token string">'subdomain2.host.com'</span><span class="token punctuation">,</span>
			<span class="token string">'host2.com'</span><span class="token punctuation">,</span>
			<span class="token string">'.host1.com'</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token comment">// This option broadcasts the server via ZeroConf networking on start</span>
		bonjour<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token comment">//å½“ä½¿ç”¨å†…è”æ¨¡å¼æ—¶ï¼Œåœ¨å¼€å‘è€…å·¥å…·çš„æ§åˆ¶å°å°†æ˜¾ç¤ºæ¶ˆæ¯ï¼Œå¦‚ï¼šåœ¨é‡æ–°åŠ è½½ä¹‹å‰ï¼Œåœ¨ä¸€ä¸ªé”™è¯¯ä¹‹å‰ï¼Œæˆ–è€…æ¨¡å—çƒ­æ›¿æ¢å¯ç”¨æ—¶ï¼Œè¿™å¯èƒ½æ˜¾å¾—å¾ˆç¹çï¼Œå¯ä»¥é˜»æ­¢æ‰€æœ‰è¿™äº›æ¶ˆæ¯ã€‚å¯èƒ½çš„å€¼æœ‰ï¼šnone,error,warningæˆ–è€…infoï¼ˆé»˜è®¤å€¼ï¼‰</span>
		clientLogLevel<span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
		<span class="token comment">// ä¸€åˆ‡æœåŠ¡éƒ½å¯ç”¨gzipå‹ç¼©,use in CLI: webpack-dev-server --compress</span>
		compress <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token comment">// å‘Šè¯‰æœåŠ¡å™¨ä»å“ªé‡Œæä¾›å†…å®¹ã€‚åªæœ‰åœ¨ä½ æƒ³è¦æä¾›é™æ€æ–‡ä»¶æ—¶æ‰éœ€è¦ã€‚</span>
		<span class="token comment">// é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨å½“å‰å·¥ä½œç›®å½•ä½œä¸ºæä¾›å†…å®¹çš„ç›®å½•ï¼Œä½†æ˜¯å¯ä»¥è‡ªå®šä¹‰ä¸ºå…¶ä»–ç›®å½•ï¼Œæ¨èä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ä»å¤šä¸ªç›®å½•æä¾›å†…å®¹ï¼Œè®¾ç½®ä¸ºfalseåˆ™è¡¨ç¤ºç¦ç”¨contentBase</span>
		contentBase<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token comment">//å½“è®¾ç½®ä¸ºtrueæ—¶ï¼Œè¯¥é€‰é¡¹ç»•è¿‡ä¸»æœºæ£€æŸ¥ã€‚è¿™æ˜¯ä¸æ¨èçš„ï¼Œå› ä¸ºä¸æ£€æŸ¥ä¸»æœºçš„åº”ç”¨ç¨‹åºæ˜“å—DNSé‡æ–°ç»‘å®šæ”»å‡»çš„å½±å“ã€‚</span>
		disableHostCheck<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token comment">//åœ¨æƒ°æ€§æ¨¡å¼ä¸­ï¼Œæ­¤é€‰é¡¹å¯ä»¥å‡å°‘ç¼–è¯‘ã€‚é»˜è®¤åœ¨æƒ°æ€§æ¨¡å¼ï¼Œæ¯ä¸ªè¯·æ±‚ç»“æœéƒ½ä¼šäº§ç”Ÿå…¨æ–°çš„ç¼–è¯‘ã€‚ä½¿ç”¨filenameï¼Œå¯ä»¥åªåœ¨æŸä¸ªæ–‡ä»¶è¢«è¯·æ±‚æ—¶ç¼–è¯‘ã€‚åœ¨ä¸ä½¿ç”¨æƒ°æ€§æ¨¡å¼çš„æƒ…å†µä¸‹filenameæ²¡æœ‰æ•ˆæœã€‚</span>
		<span class="token comment">//å¦‚æœoutput.filenameè®¾ç½®ä¸ºbundle.jsï¼Œfilenameä½¿ç”¨å¦‚ä¸‹ï¼š</span>
		lazy<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		filename<span class="token operator">:</span> <span class="token string">&quot;bundle.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// ç°åœ¨åªæœ‰åœ¨è¯·æ±‚bundle.jsæ—¶å€™ï¼Œæ‰ä¼šç¼–è¯‘bundle</span>
		<span class="token comment">// åœ¨æ‰€æœ‰å“åº”ä¸­æ·»åŠ é¦–éƒ¨å†…å®¹ï¼š</span>
		headers<span class="token operator">:</span><span class="token punctuation">{</span>
			<span class="token string">'X-Custom-Foo'</span><span class="token operator">:</span><span class="token string">'bar'</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// å½“ä½¿ç”¨HTML5 History APIæ—¶ï¼Œä»»æ„çš„404å“åº”éƒ½å¯èƒ½éœ€è¦è¢«æ›¿ä»£ä¸ºindex.htmlï¼Œé€šè¿‡ä¼ å…¥ä»¥ä¸‹å¯ç”¨</span>
		historyApiFallback<span class="token operator">:</span> <span class="token boolean">true</span>
		<span class="token comment">//é€šè¿‡ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œæ¯”å¦‚ä½¿ç”¨rewritesè¿™ä¸ªé€‰æ‹©ï¼Œæ­¤è¡Œä¸ºå¯è¿›ä¸€æ­¥æ§åˆ¶ï¼š</span>
		historyApiFallback<span class="token operator">:</span> <span class="token punctuation">{</span>
			 rewrites<span class="token operator">:</span> <span class="token punctuation">[</span>
			    <span class="token punctuation">{</span> from<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token string">'/views/landing.html'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
			    <span class="token punctuation">{</span> from<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/subpage</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token string">'/views/subpage.html'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
			    <span class="token punctuation">{</span> from<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token string">'/views/404.html'</span> <span class="token punctuation">}</span>
			 <span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// æŒ‡å®šä½¿ç”¨ä¸€ä¸ªhostã€‚é»˜è®¤æ˜¯localhostã€‚å¦‚æœå¸Œæœ›æœåŠ¡å™¨å¤–éƒ¨å¯è®¿é—®ï¼ŒæŒ‡å®šå¦‚ä¸‹ï¼š</span>
		host<span class="token operator">:</span> <span class="token string">'0.0.0.0'</span><span class="token punctuation">,</span>
		<span class="token comment">// å¯ç”¨webpackçš„æ¨¡å—çƒ­æ›¿æ¢ç‰¹æ€§</span>
		hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token comment">// å¯ç”¨çƒ­æ¨¡å—æ›¿æ¢ï¼Œåœ¨ç”Ÿæˆå¤±è´¥çš„æƒ…å†µä¸‹ï¼Œæ²¡æœ‰é¡µé¢åˆ·æ–°ä½œä¸ºå›é€€</span>
		hotOnly<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token comment">// é»˜è®¤æƒ…å†µä¸‹ï¼Œdev-serveré€šè¿‡HTTPæä¾›æœåŠ¡ã€‚ä¹Ÿå¯ä»¥é€‰æ‹©å¸¦æœ‰HTTPSçš„HTTP/2æä¾›æœåŠ¡ï¼š</span>
		https<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token comment">// ä»¥ä¸Šè®¾ç½®ä½¿ç”¨äº†è‡ªç­¾åè¯ä¹¦ï¼Œå¯ä»¥æä¾›è‡ªå·±çš„ï¼š</span>
		https<span class="token operator">:</span><span class="token punctuation">{</span>
			 key<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;/path/to/server.key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			 cert<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;/path/to/server.crt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			 ca<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;/path/to/ca.pem&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// ç´¢å¼•æ–‡ä»¶çš„æ–‡ä»¶å</span>
		index<span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
		<span class="token comment">// åœ¨dev-serverçš„ä¸¤ç§ä¸åŒæ¨¡å¼ä¹‹é—´åˆ‡æ¢ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåº”ç”¨ç¨‹åºå¯ç”¨å†…è”æ¨¡å¼ã€‚è¿™æ„å‘³ç€ä¸€æ®µå¤„ç†å®æ—¶é‡è½½çš„è„šæœ¬è¢«æ’å…¥åˆ°bundleä¸­ï¼Œå¹¶ä¸”æ„å»ºæ¶ˆæ¯å°†ä¼šå‡ºç°åœ¨æµè§ˆå™¨æ§åˆ¶å°ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨iframeæ¨¡å¼ï¼Œå®ƒåœ¨é€šçŸ¥æ ä¸‹é¢ä½¿ç”¨&lt;iframe&gt;æ ‡ç­¾ï¼ŒåŒ…å«äº†å…³äºæ„å»ºçš„æ¶ˆæ¯ã€‚åˆ‡æ¢åˆ°iframeæ¨¡å¼å¦‚ä¸‹ï¼š</span>
		inline<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token comment">// æƒ°æ€§æ¨¡å¼ï¼Œè¿™æ„å‘³ç€webpackä¸ä¼šç›‘å¬ä»»ä½•æ–‡ä»¶çš„æ”¹åŠ¨ï¼Œå¯ç”¨å¦‚ä¸‹ï¼š</span>
		lazy<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token comment">// å¯ç”¨noInfoåï¼Œè¯¸å¦‚ã€å¯åŠ¨æ—¶å’Œæ¯æ¬¡ä¿å­˜åï¼Œé‚£äº›æ˜¾ç¤ºçš„webpackåŒ…(bundle)ä¿¡æ¯ã€‘çš„æ¶ˆæ¯å°†è¢«éšè—ã€‚é”™è¯¯å’Œè­¦å‘Šä»ç„¶ä¼šæ˜¾ç¤ºã€‚å¯ç”¨å¦‚ä¸‹ï¼š</span>
		noInfo<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token comment">// å½“openä¸ºå¯ç”¨ï¼Œdev serverå°†æ‰“å¼€æµè§ˆå™¨</span>
		<span class="token comment">// use in CLI: webpac-dev-server --open ['Google Chrome']</span>
		open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token comment">// æŒ‡å®šåœ¨æ‰“å¼€æµè§ˆå™¨æ—¶å¯¼èˆªåˆ°çš„é¡µé¢</span>
		<span class="token comment">// use in CLI: webpack-dev-server --open-page &quot;/different/page&quot;</span>
		openPage<span class="token operator">:</span> <span class="token string">'/different/page'</span><span class="token punctuation">,</span>
		<span class="token comment">//åœ¨å­˜åœ¨ç¼–è¯‘å™¨é”™è¯¯æˆ–è­¦å‘Šæ—¶åœ¨æµè§ˆå™¨ä¸­å…¨å±è¦†ç›–æ˜¾ç¤ºã€‚é»˜è®¤æƒ…å†µä¸‹ç¦ç”¨ï¼Œå¦‚æœåªæ˜¾ç¤ºç¼–è¯‘å™¨é”™è¯¯ï¼š</span>
		overlay<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token comment">// å¦‚æœæƒ³æ˜¾ç¤ºè­¦å‘Šå’Œé”™è¯¯</span>
		overlay<span class="token operator">:</span> <span class="token punctuation">{</span>
			warnings<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
			errors<span class="token operator">:</span><span class="token boolean">true</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// æŒ‡å®šè¦ç›‘å¬è¯·æ±‚çš„ç«¯å£å·</span>
		port<span class="token operator">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
		<span class="token comment">// å¦‚æœæœ‰å•ç‹¬çš„åç«¯å¼€å‘æœåŠ¡å™¨APIï¼Œå¹¶ä¸”å¸Œæœ›åœ¨åŒåŸŸåä¸‹å‘é€APIè¯·æ±‚ï¼Œé‚£ä¹ˆä»£ç†æŸäº›URLä¼šå¾ˆæœ‰ç”¨ã€‚</span>
		<span class="token comment">// dev-serverä½¿ç”¨äº†éå¸¸å¼ºå¤§çš„http-proxy-middlewareåŒ…ã€‚http-proxy-middlewareæ–‡æ¡£ï¼šhttps://github.com/chimurai/http-proxy-middleware#options</span>
		<span class="token comment">// åœ¨localhost:3000ä¸Šæœ‰åç«¯æœåŠ¡çš„è¯ï¼Œå¯ä»¥è¿™æ ·å¯åŠ¨ä»£ç†ï¼š</span>
		proxy<span class="token operator">:</span><span class="token punctuation">{</span>
			<span class="token string">&quot;/api&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:3000&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">//ä¸Šé¢è®¾ç½®åï¼Œè¯·æ±‚åˆ°/api/usersä¼šè¢«ä»£ç†åˆ°è¯·æ±‚http://localhost:3000/api/usersã€‚å¦‚æœä¸æƒ³å§‹ç»ˆä¼ é€’apiï¼Œåˆ™å¦‚ä¸‹ï¼š</span>
		proxy<span class="token operator">:</span><span class="token punctuation">{</span>
			<span class="token string">&quot;/api&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
				target<span class="token operator">:</span><span class="token string">&quot;http://localhost:3000&quot;</span><span class="token punctuation">,</span>
				pathRewrite<span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;^/api&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸æ¥å—è¿è¡Œåœ¨HTTPSä¸Šï¼Œä¸”ä½¿ç”¨äº†æ— æ•ˆè¯ä¹¦çš„åç«¯æœåŠ¡å™¨ã€‚å¦‚æœæƒ³è¦æ¥å—ï¼Œä¿®æ”¹é…ç½®å¦‚ä¸‹ï¼š</span>
		proxy<span class="token operator">:</span><span class="token punctuation">{</span>
			<span class="token string">&quot;/api&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
				target<span class="token operator">:</span><span class="token string">&quot;https://other-server.example.com&quot;</span><span class="token punctuation">,</span>
				secure<span class="token operator">:</span> <span class="token boolean">false</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// æœ‰æ—¶ä¸æƒ³ä»£ç†æ‰€æœ‰çš„è¯·æ±‚ï¼Œå¯ä»¥åŸºäºä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ç»•è¿‡ä»£ç†ã€‚</span>
		<span class="token comment">// åœ¨å‡½æ•°ä¸­å¯ä»¥è®¿é—®è¯·æ±‚ä½“ã€å“åº”ä½“å’Œä»£ç†é€‰é¡¹ã€‚å¿…é¡»è¿”å›falseæˆ–è·¯å¾„ï¼Œæ¥è·³è¿‡ä»£ç†è¯·æ±‚ã€‚</span>
		<span class="token comment">// ä¾‹å¦‚ï¼šå¯¹äºæµè§ˆå™¨è¯·æ±‚ï¼Œæƒ³è¦æä¾›ä¸€ä¸ªHTMLé¡µé¢ï¼Œä½†æ˜¯å¯¹äºAPIè¯·æ±‚åˆ™ä¿æŒä»£ç†ã€‚å¦‚ä¸‹æ“ä½œï¼š</span>
		proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string">&quot;/api&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
				targe<span class="token operator">:</span><span class="token string">'http://localhost:3000'</span><span class="token punctuation">,</span>
				<span class="token function-variable function">bypass</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> proxyOptions</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>accept<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;html&quot;</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Skipping proxy for browser request.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">return</span> <span class="token string">&quot;/index.html&quot;</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// å°†è¿è¡Œè¿›åº¦è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œåªèƒ½ç”¨åœ¨å‘½ä»¤è¡Œå·¥å…·(CLI)ä¸­ï¼šwebpack-dev-server --progress</span>
		<span class="token comment">// å½“ä½¿ç”¨å†…è”æ¨¡å¼å¹¶ä»£ç†dev-serveræ—¶ï¼Œå†…è”çš„å®¢æˆ·ç«¯è„šæœ¬å¹¶ä¸æ€»æ˜¯çŸ¥é“è¦è¿æ¥åˆ°ä»€ä¹ˆåœ°æ–¹ã€‚å®ƒä¼šå°è¯•æ ¹æ®window.locationæ¥çŒœæµ‹æœåŠ¡å™¨çš„URLï¼Œä½†æ˜¯å¦‚æœå¤±è´¥ï¼Œä½ éœ€è¦è¿™æ ·ã€‚</span>
		<span class="token comment">// ä¾‹å¦‚ï¼Œdev-serverè¢«ä»£ç†åˆ°nginxå¹¶ä¸”åœ¨myapp.testä¸Šå¯ç”¨ï¼š</span>
		<span class="token keyword">public</span><span class="token operator">:</span> <span class="token string">&quot;myapp.test:80&quot;</span><span class="token punctuation">,</span>
		<span class="token comment">// è®¾ç½®å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è®¿é—®çš„æ‰“åŒ…æ–‡ä»¶</span>
		<span class="token comment">// å‡è®¾æœåŠ¡å™¨è¿è¡Œåœ¨http://localhost:8080å¹¶ä¸”output.filenameè¢«è®¾ç½®ä¸ºbundle.jsã€‚é»˜è®¤publicPathæ˜¯&quot;/&quot;ï¼Œæ‰€ä»¥bundleå¯ä»¥é€šè¿‡http://localhost:8080/bundle.jsè®¿é—®ï¼Œå¯ä»¥ä¿®æ”¹publicPathå°†bundleæ”¾åœ¨ä¸€ä¸ªç›®å½•ï¼š</span>
		publicPath<span class="token operator">:</span> <span class="token string">&quot;/assets/&quot;</span><span class="token punctuation">,</span><span class="token comment">//å¦‚æ­¤åŒ…å¯ä»¥é€šè¿‡http://localhost:8080/assets/bundle.jsè®¿é—®ã€‚ç¡®ä¿publicPathæ€»æ˜¯ä»¥æ–œæ (/)å¼€å¤´å’Œç»“å°¾ã€‚</span>
		<span class="token comment">// ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå®Œæ•´çš„URLï¼Œè¿™æ˜¯æ¨¡å—çƒ­æ›¿æ¢æ‰€å¿…é¡»çš„</span>
		publicPath<span class="token operator">:</span> <span class="token string">&quot;http://localhost:8080/assets/&quot;</span><span class="token punctuation">,</span>
		<span class="token comment">// å¯ç”¨quetåï¼Œé™¤äº†åˆå§‹å¯åŠ¨ä¿¡æ¯å¤–çš„ä»»ä½•å†…å®¹éƒ½ä¸ä¼šè¢«æ‰“å°åˆ°æ§åˆ¶å°ã€‚</span>
		<span class="token comment">// useage via the CLI : webpack-dev-server --quiet</span>
		quiet<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token comment">// ç”¨äºè®¿é—®express APP å¯¹è±¡ï¼Œå¹¶æ·»åŠ è‡ªå·±çš„è‡ªå®šä¹‰ä¸­é—´ä»¶ï¼Œç¤ºä¾‹ï¼š</span>
		<span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/some/path'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span>custom<span class="token operator">:</span><span class="token string">'response'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// è¿˜æœ‰éƒ¨åˆ†é…ç½®é¡¹ï¼Œè¯¦æƒ…è§ï¼šhttps://www.webpackjs.com/configuration/dev-server/</span>
	<span class="token punctuation">}</span>
</code></pre></div><h2 id="webpack-dev-middleware"><a href="#webpack-dev-middleware" class="header-anchor">#</a> webpack-dev-middleware</h2> <p><code>webpack-dev-middle</code>æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå®ƒå¯ä»¥æŠŠwebpackå¤„ç†åçš„æ–‡ä»¶ä¼ é€’ç»™ä¸€ä¸ªæœåŠ¡å™¨ã€‚<code>webpack-dev-server</code>åœ¨å†…éƒ¨ä½¿ç”¨äº†å®ƒï¼Œå®ƒä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„åŒ…æ¥ä½¿ç”¨ï¼Œä»¥ä¾¿è¿›è¡Œæ›´å¤šè‡ªå®šä¹‰è®¾ç½®æ¥å®ç°æ›´å¤šçš„éœ€æ±‚ã€‚ï¼ˆæ³¨ï¼šå¼€å‘ä¸­å‘ç°å½“å®‰è£…æœ‰<code>webpack-dev-server</code>çš„æ—¶å€™å¯ä»¥ç›´æ¥ä½¿ç”¨<code>webpack-dev-middleware</code>ï¼‰</p> <p><strong>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨webpack-dev-middlewareé…åˆexpress serverçš„ç¤ºä¾‹</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token comment">// å®‰è£…å¼€å‘ä¾èµ–ï¼šnpm install --save-dev express webpack-dev-middleware</span>
	<span class="token comment">// æ³¨ï¼šå®‰è£…è¿‡webpack-dev-serverçš„ä¸éœ€è¦å†å®‰è£…webpack-dev-middlewareï¼Œè€Œä¸”å®é™…æµ‹éªŒä¸­å®‰è£…webpack-dev-middlewareåå¼€å‘ä¸­ä¼šæŠ¥é”™ï¼Œè¯­æ³•ä¸å¤Ÿæ–°</span>
	<span class="token comment">// é…ç½®webpack.config.js</span>
	<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> CleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
		mode<span class="token operator">:</span><span class="token string">'development'</span><span class="token punctuation">,</span>
		entry<span class="token operator">:</span><span class="token punctuation">{</span>
			app<span class="token operator">:</span><span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
			print<span class="token operator">:</span><span class="token string">'./src/print.js'</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		output<span class="token operator">:</span><span class="token punctuation">{</span>
			filename<span class="token operator">:</span><span class="token string">'[name].bundle.js'</span><span class="token punctuation">,</span>
			path<span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			publicPath<span class="token operator">:</span><span class="token string">'/'</span> <span class="token comment">// publicPathä¹Ÿä¼šåœ¨æœåŠ¡å™¨è„šæœ¬ç”¨åˆ°ï¼Œä»¥ç¡®ä¿æ–‡ä»¶èµ„æºèƒ½å¤Ÿåœ¨http://localhost:3000ä¸‹æ­£ç¡®è®¿é—®ã€‚</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		devtool<span class="token operator">:</span><span class="token string">'inline-source-map'</span><span class="token punctuation">,</span>
		plugins<span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				title<span class="token operator">:</span><span class="token string">'hello world'</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'dist'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		module<span class="token operator">:</span><span class="token punctuation">{</span>
			rules<span class="token operator">:</span><span class="token punctuation">[</span>
				<span class="token punctuation">{</span>
					test<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
					use<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// é…ç½®server.jsæœåŠ¡å™¨æ–‡ä»¶ï¼Œéœ€è¦è‡ªå·±åˆ›å»º</span>
	<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> webpackDevMiddleware <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-dev-middleware'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.config.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Tell express to use the webpack-dev-middleware and use the webpack.config.js</span>
	<span class="token comment">// configuration file as a base.</span>
	app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">webpackDevMiddleware</span><span class="token punctuation">(</span>compiler<span class="token punctuation">,</span> <span class="token punctuation">{</span>
	  publicPath<span class="token operator">:</span> config<span class="token punctuation">.</span>output<span class="token punctuation">.</span>publicPath
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Serve the files on port 3000.</span>
	app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Example app listening on port 3000!\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//æ·»åŠ ä¸€ä¸ªnpm script,package.json</span>
	<span class="token punctuation">{</span>
		<span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
			<span class="token operator">...</span>
			<span class="token string">&quot;server:express&quot;</span><span class="token operator">:</span><span class="token string">&quot;node server.js&quot;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//è¿è¡Œnpm run server:express ä¾¿ä¸€ä¸ªåœ¨æµè§ˆå™¨ä¸­é€šè¿‡è®¿é—®localhost:3000è®¿é—®åˆ°è¯¥æœåŠ¡å™¨</span>
</code></pre></div><h2 id="hot-module-replacement"><a href="#hot-module-replacement" class="header-anchor">#</a> Hot Module Replacement</h2> <p>çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHot Module Replacement æˆ– HRMï¼‰</p> <p>HRMæ˜¯webpackæä¾›çš„æœ€æœ‰ç”¨çš„åŠŸèƒ½ä¹‹ä¸€ã€‚å®ƒå…è®¸è¿è¡Œæ—¶æ›´æ–°å„ç§æ¨¡å—ï¼Œè€Œæ— éœ€è¿›è¡Œå®Œå…¨åˆ·æ–°ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token comment">//webpack.config.js</span>
	<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> CleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
		mode<span class="token operator">:</span><span class="token string">'development'</span><span class="token punctuation">,</span>
		entry<span class="token operator">:</span><span class="token punctuation">{</span>
			app<span class="token operator">:</span><span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		output<span class="token operator">:</span><span class="token punctuation">{</span>
			filename<span class="token operator">:</span><span class="token string">'[name].bundle.js'</span><span class="token punctuation">,</span>
			path<span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			publicPath<span class="token operator">:</span><span class="token string">'/'</span><span class="token comment">//publicPathä¹Ÿä¼šåœ¨æœåŠ¡å™¨è„šæœ¬ç”¨åˆ°ï¼Œä»¥ç¡®ä¿æ–‡ä»¶èµ„æºèƒ½å¤Ÿåœ¨http://localhost:3000ä¸‹æ­£ç¡®è®¿é—®ã€‚</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		devtool<span class="token operator">:</span><span class="token string">'inline-source-map'</span><span class="token punctuation">,</span>
		devServer<span class="token operator">:</span><span class="token punctuation">{</span>
			contentBase<span class="token operator">:</span><span class="token string">'./dist'</span><span class="token punctuation">,</span>
			hot<span class="token operator">:</span><span class="token boolean">true</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		plugins<span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				title<span class="token operator">:</span><span class="token string">'hello world'</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'dist'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NamedModulesPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		module<span class="token operator">:</span><span class="token punctuation">{</span>
			rules<span class="token operator">:</span><span class="token punctuation">[</span>
				<span class="token punctuation">{</span>
					test<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
					use<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><p>HotModuleReplacementPluginæ’ä»¶ï¼Œå¼€å¯çƒ­æ¨¡å—æ›¿æ¢æ’ä»¶ï¼Œä¹Ÿè¢«ç§°ä¸ºHMRï¼Œæ°¸è¿œä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹å¯ç”¨HMRã€‚</p> <p>å¯ç”¨HMRéå¸¸ç®€å•ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¹Ÿä¸éœ€è¦é…ç½®</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token comment">//options....</span>
		<span class="token comment">// multiStep(boolean):è®¾ç½®ä¸ºtrueæ—¶ï¼Œæ’ä»¶ä¼šåˆ†æˆä¸¤æ­¥æ„å»ºæ–‡ä»¶ã€‚é¦–å…ˆç¼–è¯‘åŠ è½½chunksï¼Œä¹‹åå†ç¼–è¯‘å‰©ä½™çš„é€šå¸¸çš„èµ„æº</span>
		<span class="token comment">// fullBuildTimeout(number)ï¼šå½“multiStepå¯ç”¨æ—¶ï¼Œè¡¨ç¤ºä¸¤æ­¥æ„å»ºä¹‹é—´çš„å»¶æ—¶</span>
		<span class="token comment">// requestTimeout(number)ï¼šä¸‹è½½manifestçš„å»¶æ—¶</span>
		<span class="token comment">// è¿™äº›é€‰é¡¹å±äºå®éªŒæ€§å†…å®¹ï¼Œå› æ­¤ä»¥åå¯èƒ½ä¼šè¢«å¼ƒç”¨ã€‚å°±å¦‚åŒä¸Šæ–‡æ‰€è¯´çš„é‚£æ ·ï¼Œè¿™äº›é€‰é¡¹é€šå¸¸æƒ…å†µä¸‹éƒ½æ˜¯æ²¡æœ‰å¿…è¦è®¾ç½®çš„ï¼Œä»…ä»…æ˜¯è®¾ç½®ä¸€ä¸‹ new webpack.HotModuleReplacementPlugin() åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹å°±è¶³å¤Ÿäº†ã€‚</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="namedmodulesplugin"><a href="#namedmodulesplugin" class="header-anchor">#</a> NamedModulesPlugin</h2> <p>å½“å¼€å¯HMRçš„æ—¶å€™ä½¿ç”¨è¯¥æ’ä»¶ä¼šæ˜¾ç¤ºæ¨¡å—çš„ç›¸å¯¹è·¯å¾„ï¼Œå»ºè®®ç”¨äºå¼€å‘ç¯å¢ƒ</p> <p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å°†print.jsä»å…¥å£å¤„å»æ‰ï¼Œåªç•™ä¸‹äº†index.jsä¸€ä¸ªå…¥å£æ–‡ä»¶ï¼Œæ­¤æ—¶è¿è¡Œ<code>npm start</code>å½“æˆ‘ä»¬ä¿®æ”¹<code>index.js</code>æ–‡ä»¶æ—¶ï¼Œæµè§ˆå™¨ä¸­çš„é¡µé¢ä¼šè‡ªåŠ¨å˜åŒ–ï¼Œè€Œä¿®æ”¹<code>print.js</code>æ—¶ï¼Œæµè§ˆå™¨ä¸­çš„é¡µé¢å¹¶ä¸ä¼šè§¦å‘å˜åŒ–ï¼Œå› ä¸º<code>print.js</code>çš„ä¿®æ”¹æ²¡æœ‰æ”¹å˜<code>index.js</code>çš„äº‹ä»¶ç»‘å®šã€‚</p> <p><strong>ä¸‹é¢ä¿®æ”¹index.jsï¼Œä»¥ä¾¿print.jså‘ç”Ÿå˜åŒ–æ—¶å¯ä»¥å‘Šè¯‰webpackæ¥å—æ›´æ–°çš„æ¨¡å—</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token comment">//index.js</span>
	<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>
	<span class="token keyword">import</span> printMe <span class="token keyword">from</span> <span class="token string">'./print'</span><span class="token punctuation">;</span>
	<span class="token keyword">import</span> <span class="token string">'./style.css'</span>

	<span class="token keyword">function</span> <span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">let</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span><span class="token string">'world'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'red_text'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">let</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		btn<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'click to print something'</span><span class="token punctuation">;</span>
		btn<span class="token punctuation">.</span>onclick <span class="token operator">=</span> printMe<span class="token punctuation">;</span>

		element<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>btn<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> element<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">let</span> element <span class="token operator">=</span> <span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span><span class="token punctuation">{</span>
		module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">'./print.js'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Accepting the updated printMe module!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
			element <span class="token operator">=</span> <span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
</code></pre></div><p><strong>é€šè¿‡Node.js API</strong></p> <p>å½“ä½¿ç”¨<code>webpack dev server</code>å’Œ<code>Node.js API</code>æ—¶ï¼Œä¸è¦å°†<code>dev server</code>é€‰é¡¹æ”¾åœ¨webpacké…ç½®å¯¹è±¡ä¸­ã€‚è€Œæ˜¯ï¼Œåœ¨åˆ›å»ºé€‰é¡¹æ—¶ï¼Œå°†å…¶ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ã€‚ä¾‹å¦‚ï¼š</p> <p><code>new webpackDevServer(compiler, options)</code></p> <p>æƒ³è¦å¯ç”¨HMRï¼Œè¿˜éœ€è¦ä¿®æ”¹webpacké…ç½®å¯¹è±¡ï¼Œä½¿å…¶åŒ…å«HMRå…¥å£èµ·ç‚¹ã€‚<code>webpack-dev-server package</code>ä¸­å…·æœ‰ä¸€ä¸ªå«åš<code>addDevServerEntrypoints</code>çš„æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¥å®ç°ã€‚è¿™æ˜¯å…³äºå¦‚ä½•ä½¿ç”¨çš„ä¸€ä¸ªå°ä¾‹å­ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token comment">// dev-server.js</span>
	<span class="token keyword">const</span> webpackDevServer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-dev-server'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.config.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
		contentBase<span class="token operator">:</span><span class="token string">'./dist'</span><span class="token punctuation">,</span>
		hot<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
		host<span class="token operator">:</span><span class="token string">'localhost'</span>
	<span class="token punctuation">}</span>

	webpackDevServer<span class="token punctuation">.</span><span class="token function">addDevServerEntrypoints</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">webpackDevServer</span><span class="token punctuation">(</span>compiler<span class="token punctuation">,</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>

	server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">,</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'dev server listening on port 5000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>å‚è€ƒæ–‡æ¡£ï¼š<a href="https://www.webpackjs.com/concepts/" target="_blank" rel="noopener noreferrer">webpackå®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/engineering/gulp/" class="prev">
        Gulp
      </a></span> <span class="next"><a href="/engineering/webpack/start/">
        æ­å»ºä¸€ä¸ªç®€å•é¡¹ç›®
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5fc96bdf.js" defer></script><script src="/assets/js/2.56cd01f5.js" defer></script><script src="/assets/js/64.5410a8b2.js" defer></script>
  </body>
</html>
