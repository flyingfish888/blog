(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{399:function(t,s,o){t.exports=o.p+"assets/img/prototype.abd37955.png"},400:function(t,s,o){t.exports=o.p+"assets/img/proto.67a8f107.png"},512:function(t,s,o){"use strict";o.r(s);var n=o(45),a=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"原型链"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#原型链"}},[t._v("#")]),t._v(" 原型链")]),t._v(" "),n("p",[t._v("原型链主要是实例对象和构造函数之间的关系，而基本上所有的js对象都有构造函数，而构造函数又是一个特殊的对象。")]),t._v(" "),n("p",[t._v("JavaScript是动态的，并且本身不提供一个class实现。（在ES2015/ES6中引入了class关键字，但那只是语法糖，JavaScript仍然是基于原型的）")]),t._v(" "),n("p",[t._v("当谈到继承时，JavaScript只有一种结构：对象。每个实例对象都有一个私有属性（称之为"),n("code",[t._v("__proto__")]),t._v("）指向它的构造函数的原型对象（prototype)。该原型对象也有一个自己的原型对象("),n("code",[t._v("__proto__")]),t._v(") ，层层向上直到一个对象的原型对象为null。")]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("什么是构造函数")]),t._v(" "),n("p",[t._v("js中我们定义对象、数组等都是使用了构造函数，然后生成一个实例。")]),t._v(" "),n("p",[n("code",[t._v("Object(),Array(),Function(),Number(),String()...")])])]),t._v(" "),n("hr"),t._v(" "),n("p",[n("strong",[t._v("Object的原型链")])]),t._v(" "),n("ol",[n("li",[n("code",[t._v("Object.__proto__")]),t._v(" => "),n("code",[t._v("Function.prototype")])]),t._v(" "),n("li",[n("code",[t._v("Function.prototype.__proto__")]),t._v(" => "),n("code",[t._v("Object.prototype")])]),t._v(" "),n("li",[n("code",[t._v("Object.prototype.__proto__")]),t._v(" => "),n("code",[t._v("null")])])]),t._v(" "),n("p",[n("strong",[t._v("Function的原型链")])]),t._v(" "),n("ol",[n("li",[n("code",[t._v("Function.__proto__")]),t._v(" => "),n("code",[t._v("Function.prototype")])]),t._v(" "),n("li",[n("code",[t._v("Function.prototype.__proto__")]),t._v(" => "),n("code",[t._v("Object.prototype")])]),t._v(" "),n("li",[n("code",[t._v("Object.prototype.__proto__")]),t._v(" => "),n("code",[t._v("null")])])]),t._v(" "),n("p",[n("strong",[t._v("Array/String/Number以及普通函数的原型链")])]),t._v(" "),n("p",[n("em",[t._v("由于他们都类似，示例统一用Fn代替")])]),t._v(" "),n("ol",[n("li",[n("code",[t._v("Fn.__proto__")]),t._v(" => "),n("code",[t._v("Function.prototype")])]),t._v(" "),n("li",[n("code",[t._v("Function.prototype.__proto__")]),t._v(" => "),n("code",[t._v("Object.prototype")])]),t._v(" "),n("li",[n("code",[t._v("Object.prototype.__proto__")]),t._v(" => "),n("code",[t._v("null")])])]),t._v(" "),n("p",[t._v("从上面示例可以看出，普通函数和构造函数的原型链基本都要走到上面的过程。")]),t._v(" "),n("p",[n("strong",[t._v("对象实例obj的原型链")])]),t._v(" "),n("p",[n("code",[t._v("obj = {}")])]),t._v(" "),n("ol",[n("li",[n("code",[t._v("obj.__proto__")]),t._v(" => "),n("code",[t._v("Object.prototype")])]),t._v(" "),n("li",[n("code",[t._v("Object.prototype.__proto__")]),t._v(" => "),n("code",[t._v("null")])])]),t._v(" "),n("p",[n("strong",[t._v("数组实例arr的原型链")])]),t._v(" "),n("p",[n("code",[t._v("arr = []")])]),t._v(" "),n("ol",[n("li",[n("code",[t._v("arr.__proto__")]),t._v(" => "),n("code",[t._v("Array.prototype")])]),t._v(" "),n("li",[n("code",[t._v("Array.protoType.__proto__")]),t._v(" => "),n("code",[t._v("Object.prototype")])]),t._v(" "),n("li",[n("code",[t._v("Object.prototype.__proto__")]),t._v(" => "),n("code",[t._v("null")])])]),t._v(" "),n("p",[t._v("从上面的示例可以看到，实例都指向它构造函数的prototype，而构造函数的prototype是一个对象，它的原型（"),n("strong",[t._v("proto")]),t._v("）都指向"),n("code",[t._v("Object.prototype")]),t._v("，然后指向null完成整个原型链。")]),t._v(" "),n("p",[t._v("大多数对象的原型（"),n("strong",[t._v("proto")]),t._v("）都指向它构造函数的prototype，而构造函数的prototype其实就是一个对象，所以构造函数的prototype的原型("),n("strong",[t._v("proto")]),t._v(")就又指向了"),n("code",[t._v("Object.prototype")]),t._v("。")]),t._v(" "),n("p",[t._v("而构造函数的原型（"),n("strong",[t._v("proto")]),t._v("）都指向"),n("code",[t._v("Function.prototype")]),t._v("，"),n("code",[t._v("Function.prototype")]),t._v("的原型("),n("strong",[t._v("proto")]),t._v(")又指向"),n("code",[t._v("Object.prototype")]),t._v("，所以侧面说明构造函数其实也是对象，特殊的对象。")]),t._v(" "),n("p",[n("strong",[t._v("通过create方法创建对象的原型链")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" a"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" b "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),n("p",[t._v("b的原型链：")]),t._v(" "),n("ol",[n("li",[n("code",[t._v("b.__proto__")]),t._v(" => "),n("code",[t._v("a")])]),t._v(" "),n("li",[n("code",[t._v("a.__proto__")]),t._v(" => "),n("code",[t._v("Object.prototype")])]),t._v(" "),n("li",[n("code",[t._v("Object.prototype.__proto__")]),t._v(" => "),n("code",[t._v("null")])])]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),n("p",[t._v("以上事例均可通过恒等（===）进行校验，如"),n("code",[t._v("console.log(Object.__proto__ === Function.prototype // true")])])]),t._v(" "),n("hr"),t._v(" "),n("p",[n("strong",[t._v("关系图")])]),t._v(" "),n("p",[t._v("主要是这个图，这个懂了，其他就都懂了。")]),t._v(" "),n("p",[n("img",{attrs:{src:o(399),alt:"关系图"}})]),t._v(" "),n("p",[t._v("别处发现的一个图，挺清晰明了的")]),t._v(" "),n("blockquote",[n("p",[t._v("来源："),n("a",{attrs:{href:"https://juejin.cn/post/6844903704663949325",target:"_blank",rel:"noopener noreferrer"}},[t._v("原型图"),n("OutboundLink")],1),t._v(";")])]),t._v(" "),n("p",[n("img",{attrs:{src:o(400),alt:"原型图"}})]),t._v(" "),n("p",[n("strong",[t._v("代码验证：")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" obj "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" arr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("fn")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 非函数实例对象的__proto__都指向Object(构造函数)的prototype")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Array")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 构造函数也是对象，prototype只是它的一个特殊属性，它也有__proto__属性，切都指向Function(构造函数)的prototype")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Function"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Array"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 实例对象的__proto__都指向自己构造函数的prototype")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Array")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Object(构造函数)的prototype的__proto__指向null，原型链终点")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n\n")])])]),n("hr"),t._v(" "),n("p",[t._v("总结：")]),t._v(" "),n("ol",[n("li",[t._v("几乎所有 JavaScript 中的对象都是位于原型链顶端的 Object 的实例。")]),t._v(" "),n("li",[t._v("js中函数是一等公民，而函数是一个特殊的对象。")]),t._v(" "),n("li",[t._v("大多数对象的原型（"),n("code",[t._v("__proto__")]),t._v("）都指向它构造函数的prototype，而构造函数的prototype的原型（"),n("code",[t._v("__proto__")]),t._v("）都指向"),n("code",[t._v("Object.prototype")]),t._v("，侧面说明构造函数其实也是对象，特殊的对象。")]),t._v(" "),n("li",[t._v("原型链是通过"),n("code",[t._v("__proto__")]),t._v("实现继承的，查找属性也是通过"),n("code",[t._v("__proto__")]),t._v("一层一层查找的，不是通过"),n("code",[t._v("prototype")]),t._v("。")]),t._v(" "),n("li",[t._v("根据定义，null没有原型，并作为这个原型链中的最后一个环节。")])]),t._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),n("ul",[n("li",[t._v("这里只是说明关系，Function/Object都有部分功能是引擎原生的实现")]),t._v(" "),n("li",[t._v("原型可以被手动修改，"),n("code",[t._v("__proto__")]),t._v("也可以被修改，上面的逻辑基于不直接操作"),n("code",[t._v("__proto__")]),t._v("和相关函数的"),n("code",[t._v("prototype")])])])]),t._v(" "),n("blockquote",[n("p",[t._v("参考文档："),n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN：继承与原型链"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=a.exports}}]);